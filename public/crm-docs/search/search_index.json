{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"CRM Dokumentace","text":"<p>Tato str\u00e1nka obsahuje okam\u017eit\u00fd n\u00e1vod jak dokumentaci spr\u00e1vn\u011b udr\u017eovat a tak\u00e9 p\u0159ipraven\u00fd AI prompt pro kontextov\u00e9 dotazy / generov\u00e1n\u00ed.</p>"},{"location":"#jak-udrzovat-dokumentaci","title":"Jak udr\u017eovat dokumentaci","text":"<p>Principy: 1. Single Source of Truth: Generovan\u00e9 reference v <code>docs/16-generated</code> NIKDY ru\u010dn\u011b needitovat (\u00fapravy pouze p\u0159es k\u00f3d / gener\u00e1tor v <code>DocsRefresh</code> nebo meta soubory). 2. Viditelnost Diff\u016f: Ka\u017ed\u00e1 zm\u011bna model\u016f / rout / job\u016f \u2192 v\u017edy <code>php artisan docs:refresh</code> p\u0159ed commitem (CI failne pokud chyb\u00ed diff commit). 3. Popisy Menu: Texty sekc\u00ed a polo\u017eek v CRM menu udr\u017eovat v <code>docs/_meta/menu.php</code> (gener\u00e1tor vytvo\u0159\u00ed tabulky v <code>navigation.md</code>). 4. Strukturovan\u00e9 Rozhodnut\u00ed: Ka\u017ed\u00e9 v\u00fdznamn\u00e9 arch / procesn\u00ed rozhodnut\u00ed \u2192 p\u0159idat ADR do <code>docs/12-adr</code> (pou\u017eij \u0161ablonu <code>15-templates/adr-template.md</code>). 5. Modulov\u00e1 Dokumentace: Ka\u017ed\u00fd nov\u00fd modul m\u00e1 vlastn\u00ed soubor v <code>docs/04-modules</code> + dopln\u011bn\u00ed do <code>mkdocs.yml</code> + p\u0159\u00edpadn\u011b sekci v \"Jak CRM funguje\". 6. Generovan\u00e9 Artefakty: P\u0159id\u00e1n\u00ed nov\u00e9ho typu generovan\u00e9ho v\u00fdstupu \u2192 roz\u0161\u00ed\u0159it t\u0159\u00eddu <code>app/Console/Commands/DocsRefresh.php</code> a p\u0159idat do nav v <code>mkdocs.yml</code>. 7. Review Cadence: Minim\u00e1ln\u011b 1\u00d7 t\u00fddn\u011b proj\u00edt (a) po\u010det v\u00fdskyt\u016f <code>_(popis chyb\u00ed)_</code> v <code>navigation.md</code>, (b) zastaral\u00e9 ADR (doplnit superseded), (c) zm\u011bny sch\u00e9matu vs. DB Schema (gen). 8. Minim\u00e1ln\u00ed Metadata Model\u016f: P\u0159i p\u0159id\u00e1n\u00ed modelu doplnit <code>$fillable</code>, <code>$casts</code> a stru\u010dn\u00fd PHPDoc (prvn\u00ed \u0159\u00e1dek se prom\u00edtne v job katalogu / budouc\u00edch gener\u00e1torech). 9. Alerting &amp; Observability: P\u0159i p\u0159id\u00e1n\u00ed nov\u00e9 ops aktivity logovat p\u0159es <code>OpsActivity</code> pro budouc\u00ed metriky. 10. AI Ready: Preferovat kr\u00e1tk\u00e9, deklarativn\u00ed odstavce p\u0159ed dlouh\u00fdmi esejemi \u2013 usnad\u0148uje extrakci kontextu pro AI.</p> <p>Workflow (rychl\u00fd check\u2011list p\u0159ed PR): - [ ] Zm\u011bny k\u00f3du ovliv\u0148uj\u00ed routy / joby / schedule / modely?     - Ano \u2192 spustit <code>php artisan docs:refresh</code>. - [ ] P\u0159ibyly nov\u00e9 menu polo\u017eky? \u2192 aktualizovat <code>docs/_meta/menu.php</code>. - [ ] Nov\u00e9 rozhodnut\u00ed? \u2192 ADR. - [ ] Nov\u00fd modul / integrace? \u2192 modulov\u00fd soubor + <code>.env.example</code> prom\u011bnn\u00e9 + sekce v How it Works. - [ ] Build statick\u00e9ho webu (voliteln\u00e9 lok\u00e1ln\u011b) <code>bash scripts/docs/build.sh</code>.</p> <p>Nej\u010dast\u011bj\u0161\u00ed chyby &amp; prevence: | Chyba | Prevence | |-------|----------| | Chyb\u011bj\u00edc\u00ed commit generovan\u00fdch soubor\u016f | Spustit <code>docs:refresh</code> p\u0159ed push (CI detekuje) | | Rozbit\u00e1 navigace (mkdocs) | Po editaci <code>mkdocs.yml</code> rychle spustit lok\u00e1ln\u00ed build | | Nezdokumentovan\u00e1 nov\u00e1 route | P\u0159idat popis do <code>menu.php</code> (jinak (popis chyb\u00ed)) | | Zapomenut\u00e9 ADR | P\u0159ed merge zkontrolovat difflog / PR konverzaci |</p> <p>Z\u00e1kladn\u00ed adres\u00e1\u0159ov\u00e9 role: | Cesta | \u00da\u010del | |-------|------| | <code>docs/01-intro</code> | Vysv\u011btluj\u00edc\u00ed vstupn\u00ed p\u0159ehled (How it works) | | <code>docs/02-architecture</code> | Architektonick\u00e9 diagramy / p\u0159ehledy | | <code>docs/03-domain</code> | Dom\u00e9nov\u00fd model, ERD reference odkazy | | <code>docs/04-modules</code> | Modulov\u00e9 dokumenty (ru\u010dn\u00ed) | | <code>docs/12-adr</code> | Architecture Decision Records | | <code>docs/13-runbooks</code> | Operativn\u00ed runbooky | | <code>docs/14-checklists</code> | Kontroln\u00ed seznamy | | <code>docs/15-templates</code> | \u0160ablony (ADR, modul) | | <code>docs/16-generated</code> | Auto generovan\u00e9 reference | | <code>docs/_meta</code> | Konfig / mapov\u00e1n\u00ed pro gener\u00e1tory |</p>"},{"location":"#ai-prompt-kopiruj-vloz-do-nastroje","title":"AI Prompt (kop\u00edruj &amp; vlo\u017e do n\u00e1stroje)","text":"<p>Pou\u017eij tento prompt pro AI agenta, aby efektivn\u011b dopl\u0148oval / aktualizoval dokumentaci.</p> <pre><code>SYSTEM CONTEXT:\nJsi technick\u00fd dokumenta\u010dn\u00ed asistent pro Laravel CRM projekt. Dodr\u017euj existuj\u00edc\u00ed strukturu MkDocs.\n\nREPO DOKUMENTA\u010cN\u00cd ZDROJE (priority):\n1. How it Works: docs/01-intro/how-it-works.md (business &amp; flow context)\n2. Domain Model + ERD + Model Fields: docs/03-domain/*.md + docs/16-generated/erd.md + model-fields.md + db-schema.md\n3. Menu / Navigace: docs/16-generated/navigation.md + meta popisy v docs/_meta/menu.php\n4. Ops / Runbooks: docs/04-modules/ops.md + docs/13-runbooks/ops-runbook.md\n5. ADR: docs/12-adr (rozhodnut\u00ed \u2013 respektuj, pokud nejsou superseded)\n6. Generovan\u00e9 reference: docs/16-generated (NEedituj ru\u010dn\u011b)\n\nPO\u017dADAVKY NA TVORBU / \u00daPRAVY:\n- Pokud zm\u011bna vy\u017eaduje generovan\u00fd soubor, navrhni \u00fapravu k\u00f3du (DocsRefresh) m\u00edsto ru\u010dn\u00ed editace.\n- Stru\u010dn\u00e9 v\u011bcn\u00e9 formulace, prvn\u00ed odstavec ka\u017ed\u00e9 nov\u00e9 sekce = summary pro embedding.\n- Ka\u017ed\u00fd nov\u00fd modul: soubor v docs/04-modules + aktualizace mkdocs.yml + p\u0159\u00edpadn\u00fd z\u00e1znam v How it Works.\n- Nov\u00e9 rozhodnut\u00ed: vytvo\u0159 ADR dle \u0161ablony docs/15-templates/adr-template.md.\n- U menu polo\u017eek: pokud p\u0159id\u00e1v\u00e1\u0161 nebo roz\u0161i\u0159uje\u0161 route, dopl\u0148 popis do docs/_meta/menu.php.\n\nKONTROLY P\u0158ED HOTOVO:\n1. Je pot\u0159eba spustit `php artisan docs:refresh`? (routy / modely / joby / schedule zm\u011bny)\n2. Byl upraven `mkdocs.yml` pokud p\u0159ibyly ru\u010dn\u00ed str\u00e1nky?\n3. Z\u016fstaly n\u011bkde placeholdery \"(popis chyb\u00ed)\" kter\u00e9 lze doplnit?\n4. Pot\u0159ebuje zm\u011bna ADR (nov\u00e9 nebo superseded)?\n\nV\u00ddSTUP:\n- Seznam p\u0159esn\u00fdch soubor\u016f k vytvo\u0159en\u00ed/\u00faprav\u011b.\n- Stru\u010dn\u00e9 shrnut\u00ed pro\u010d.\n- N\u00e1vrh patch\u016f (diff styl) NEobsahuj\u00edc\u00ed generovan\u00e9 16-generated*.md soubory.\n\nBezpe\u010dnost: Neunikat tajn\u00e9 hodnoty z .env ani credentials.\n</code></pre> <p>Profesn\u00ed intern\u00ed dokumentace generovan\u00e1 z Markdown + automatick\u00fdch v\u00fdpis\u016f.</p>"},{"location":"#rychly-start","title":"Rychl\u00fd start","text":"<ol> <li><code>php artisan docs:refresh</code> \u2013 regenerace referenc\u00ed.</li> <li><code>bash scripts/docs/build.sh</code> \u2013 build HTML (vy\u017eaduje Docker).</li> <li>Otev\u0159i <code>site/index.html</code> nebo publikovan\u00e9 <code>/crm-docs/</code>.</li> </ol>"},{"location":"#sekce-stav","title":"Sekce (stav)","text":"<ul> <li>Architektura \u2013 skeleton.</li> <li>Moduly \u2013 Ops hotovo; dal\u0161\u00ed TBD.</li> <li>Runtime \u2013 generovan\u00e9 (routy, schedule, jobs, env matrix).</li> <li>Runbook \u2013 udr\u017eov\u00e1n v <code>docs/13-runbooks</code>.</li> </ul>"},{"location":"#konvence","title":"Konvence","text":"<ul> <li>Slo\u017eka <code>docs/16-generated</code> = auto output (commitovat). </li> <li>Ru\u010dn\u011b psan\u00e9 soubory: modulov\u00e9, ADR, architektura.</li> </ul>"},{"location":"#prikazy","title":"P\u0159\u00edkazy","text":"\u00da\u010del P\u0159\u00edkaz Regenerace <code>php artisan docs:refresh</code> Build HTML <code>bash scripts/docs/build.sh</code>"},{"location":"#dalsi-kroky","title":"Dal\u0161\u00ed kroky","text":"<ul> <li>Doplnit modul ActiveCampaign, Knowledge.</li> <li>Zav\u00e9st ADR prvn\u00ed sady.</li> </ul>"},{"location":"01-intro/changelog/","title":"Changelog &amp; Release Notes","text":"<p>Tento dokument udr\u017euje auditn\u00ed stopu v\u00fdznamn\u00fdch zm\u011bn aplikace. Ka\u017ed\u00e1 polo\u017eka mus\u00ed b\u00fdt konzistentn\u00ed s principy dokumentace (aktu\u00e1lnost, jasn\u00e1 orientace, dopad na u\u017eivatele a provoz).</p>"},{"location":"01-intro/changelog/#format-polozky","title":"Form\u00e1t polo\u017eky","text":"<pre><code>## [YYYY-MM-DD] vX.Y.Z (TYPE)\n### Shrnut\u00ed\nStru\u010dn\u00e1 v\u011bta co se zm\u011bnilo / p\u0159ibylo / opravilo.\n\n### Detaily\n- Kontext / d\u016fvod\n- Co bylo p\u0159id\u00e1no / zm\u011bn\u011bno / odstran\u011bno\n- Dot\u010den\u00e9 moduly / routes / config\n\n### Dopady\n- U\u017eivatel: \u2026\n- Provoz / infra: \u2026\n- Bezpe\u010dnost / compliance: \u2026 (pokud relevantn\u00ed)\n\n### Migrace / Kroky po nasazen\u00ed\n- \u2026\n\n### Odkazy\n- ADR: \u2026\n- Souvisej\u00edc\u00ed dokumenty: \u2026\n</code></pre> <p>TYPE pou\u017e\u00edvejte: <code>ADDED</code>, <code>CHANGED</code>, <code>FIXED</code>, <code>REMOVED</code>, <code>SECURITY</code>, <code>PERF</code>, <code>DOCS</code>.</p> <p>Nov\u00e9 polo\u017eky p\u0159id\u00e1vejte NAHORU (nejnov\u011bj\u0161\u00ed prvn\u00ed) kv\u016fli rychl\u00e9 orientaci.</p>"},{"location":"01-intro/changelog/#posledni-zmeny","title":"Posledn\u00ed zm\u011bny","text":""},{"location":"01-intro/changelog/#2025-09-04-v011-fixed","title":"[2025-09-04] v0.1.1 (FIXED)","text":""},{"location":"01-intro/changelog/#shrnuti","title":"Shrnut\u00ed","text":"<p>Opraven 419 (Page Expired) p\u0159i p\u0159ihl\u00e1\u0161en\u00ed \u2013 dopln\u011bna web middleware vrstva (session &amp; CSRF).</p>"},{"location":"01-intro/changelog/#detaily","title":"Detaily","text":"<ul> <li>P\u0159id\u00e1ny t\u0159\u00eddy <code>EncryptCookies</code>, <code>VerifyCsrfToken</code>, <code>Authenticate</code>.</li> <li>V <code>bootstrap/app.php</code> registrov\u00e1n web middleware stack.</li> <li>Alias <code>auth</code> nyn\u00ed skute\u010dn\u011b chr\u00e1n\u00ed chr\u00e1n\u011bn\u00e9 routy.</li> </ul>"},{"location":"01-intro/changelog/#dopady","title":"Dopady","text":"<ul> <li>Bezpe\u010dnost: Aktivn\u00ed CSRF ochrana.</li> <li>Stabilita: Korektn\u00ed udr\u017een\u00ed session a redirect po loginu.</li> </ul>"},{"location":"01-intro/changelog/#migrace-kroky","title":"Migrace / Kroky","text":"<ol> <li>Nasadit.</li> <li>(Voliteln\u011b) Smazat star\u00e9 cookies dom\u00e9ny <code>.opent2.com</code>.</li> <li>Retest POST /login (o\u010dek\u00e1van\u00fd 302 na <code>/crm</code>).</li> </ol>"},{"location":"01-intro/changelog/#odkazy","title":"Odkazy","text":"<ul> <li><code>app/Http/Middleware/*</code></li> <li><code>bootstrap/app.php</code></li> </ul>"},{"location":"01-intro/how-it-works/","title":"Jak CRM funguje (Business &amp; Technick\u00fd P\u0159ehled)","text":"<p>Tento p\u0159ehled propojuje obchodn\u00ed procesy s implementovan\u00fdmi moduly. Slou\u017e\u00ed jako vstupn\u00ed bod pro nov\u00e9 \u010dleny t\u00fdmu.</p>"},{"location":"01-intro/how-it-works/#1-zakladni-domenove-toky","title":"1. Z\u00e1kladn\u00ed Dom\u00e9nov\u00e9 Toky","text":"Tok Start Kroky (zkr\u00e1cen\u011b) Konec / Artefakt Lead \u2192 Opportunity \u2192 Deal Lead (import / formul\u00e1\u0159) Kvalifikace \u2192 konverze na Opportunity \u2192 Pipeline pohyb Deal (uzav\u0159en\u00ed Won/Lost) Company &amp; Contact Enrichment Company / Contact vytvo\u0159en\u00ed Normalizace + identita + AC sync dopln\u011bn\u00ed Aktualizovan\u00fd profil + segmentace Sales Order Lifecycle Opportunity (Won) Ru\u010dn\u00ed / automat. zalo\u017een\u00ed SalesOrder + polo\u017eky Faktura\u010dn\u00ed / reporting v\u00fdstupy Task Management Ru\u010dn\u00ed / syst\u00e9mov\u00fd trigger P\u0159i\u0159azen\u00ed (user), status zm\u011bny, dokon\u010den\u00ed Aktivita v historii + SLA metriky Knowledge Ingestion Upload / Note Chunking \u2192 Embedding \u2192 Ulo\u017een\u00ed v Qdrant Fulltext + vektorov\u00e9 vyhled\u00e1v\u00e1n\u00ed ActiveCampaign Sync Cron (job) Incremental fetch contacts \u2192 normalizace \u2192 upsert Kontakty aktu\u00e1ln\u00ed v\u016f\u010di AC Backup &amp; Verify Napl\u00e1novan\u00e9 joby Z\u00e1loha \u2192 Verify restore test \u2192 Report OpsActivity + report + alerting"},{"location":"01-intro/how-it-works/#2-moduly-a-odpovednosti","title":"2. Moduly a Odpov\u011bdnosti","text":"<ul> <li>Companies / Contacts: Centr\u00e1ln\u00ed j\u00e1dro identit. Kontakty normalizuj\u00ed email/telefon a ukl\u00e1daj\u00ed marketing status.</li> <li>Opportunities &amp; Deals: Pipeline + pravd\u011bpodobnost + d\u016fvody uzav\u0159en\u00ed (close reason) \u2192 predikce.</li> <li>Tasks &amp; Projects: Kr\u00e1tkodob\u00e9 vs. dlouhodob\u00e9 pr\u00e1ce. Task polymorfn\u00ed (taskable) nav\u00e1z\u00e1n\u00ed na Company/Contact/Project.</li> <li>Sales Orders: Monetizace \u2013 hodnoty &amp; polo\u017eky (SalesOrderItem) \u2013 z\u00e1klad pro revenue reporting.</li> <li>Knowledge Base: Dokumenty \u2192 KnowledgeDocument \u2192 KnowledgeChunk (embedding + metadata) \u2192 vyhled\u00e1v\u00e1n\u00ed.</li> <li>Ops: Z\u00e1lohy, verifikace obnovy, alerty, metriky, audit (<code>ops_activities</code>).</li> <li>Integrace (ActiveCampaign, Qdrant, Embeddings): Odd\u011blen\u00e9 konfig sekce, testy a udr\u017eiteln\u00e9 parametry.</li> </ul>"},{"location":"01-intro/how-it-works/#3-hlavni-automatizace","title":"3. Hlavn\u00ed Automatizace","text":"Automatizace Mechanika Frekvence V\u00fdsledek ActiveCampaignSyncJob Incremental contacts fetch (limit/offset) 1 min Aktualizace kontakt\u016f RunBackupJob + Verify Spatie backup + restore test denn\u011b Validovan\u00fd dump EvaluateBackupHealthJob Kontrola st\u00e1\u0159\u00ed dump\u016f/snapshot\u016f/verify 10 min Alert / Slack zpr\u00e1va Qdrant Reindex (manu\u00e1ln\u00ed) Recreate + purge ad-hoc Konsistentn\u00ed vektorov\u00fd index"},{"location":"01-intro/how-it-works/#4-datove-principy","title":"4. Datov\u00e9 Principy","text":"<ul> <li>Fillable + casts = z\u00e1klad pro heuristick\u00e9 generov\u00e1n\u00ed ERD &amp; Model Fields.</li> <li>INFORMATION_SCHEMA generuje p\u0159esn\u00e9 typy / NULL / indexy (viz DB Schema).</li> <li>Normalizace (email, phone) \u2013 minimalizuje duplicity pro segmentaci.</li> <li>Embedding dimenze konzistentn\u00ed (zm\u011bna vy\u017eaduje full reindex).</li> </ul>"},{"location":"01-intro/how-it-works/#5-navigace-ux-logika","title":"5. Navigace &amp; UX Logika","text":"<p>Viz generovan\u00e9: Navigace (gen). Struktura menu odvozen\u00e1 z rout <code>/crm/*</code>. Popisy se udr\u017euj\u00ed v <code>docs/_meta/menu.php</code> (single source). CI zaji\u0161\u0165uje, aby generovan\u00fd soubor byl aktu\u00e1ln\u00ed.</p>"},{"location":"01-intro/how-it-works/#6-alerting-observability","title":"6. Alerting &amp; Observability","text":"<ul> <li>Prometheus endpoint: <code>/crm/ops/metrics</code> (chr\u00e1n\u011bno opr\u00e1vn\u011bn\u00edm) \u2013 export metrik v\u00fdkonu a \u010derstvosti.</li> <li>Slack webhook (<code>ALERT_SLACK_WEBHOOK</code>) \u2013 odesl\u00e1n\u00ed struktur\u00e1ln\u00edch alert\u016f (STALE/FAIL/Overdue).</li> <li>Audit: <code>ops_activities</code> \u2013 datov\u00e1 z\u00e1kladna pro report a historick\u00e9 diagn\u00f3zy.</li> </ul>"},{"location":"01-intro/how-it-works/#7-rozsiritelnost","title":"7. Roz\u0161i\u0159itelnost","text":"Oblast Doporu\u010den\u00fd Pattern Nov\u00e1 entita Eloquent model + <code>$fillable</code> + migrace + doplnit doc blok (popis) Nov\u00fd modul P\u0159idat sekci v <code>docs/_meta/menu.php</code> + ADR (decision) Nov\u00e1 integrace Konfig kl\u00ed\u010de do <code>.env.example</code> + modulov\u00fd README + health test route Dal\u0161\u00ed metriky P\u0159idat gauge/counter do <code>MetricsController</code> + update ops.md Extra ACL Spatie permission seeding + permissions (gen) refresh"},{"location":"01-intro/how-it-works/#8-quality-gates-dokumentace","title":"8. Quality Gates Dokumentace","text":"<ul> <li><code>php artisan docs:refresh</code> spustit lok\u00e1ln\u011b p\u0159ed PR.</li> <li>CI job failne, pokud <code>docs/16-generated</code> diff \u2260 \u010dist\u00e9.</li> <li>Minim\u00e1ln\u00ed pokryt\u00ed popis\u016f menu: doporu\u010deno &gt;90% (sledovat po\u010det \"(popis chyb\u00ed)\").</li> </ul>"},{"location":"01-intro/how-it-works/#9-budouci-vylepseni","title":"9. Budouc\u00ed Vylep\u0161en\u00ed","text":"<ul> <li>Automatick\u00fd screenshot vybran\u00fdch UI (vizu\u00e1ln\u00ed regresn\u00ed p\u0159\u00edloha dokumentace).</li> <li>Generace sekce Analytics (konverzn\u00ed pom\u011bry) \u2192 pipeline v\u00fdpo\u010det cronem.</li> <li>Mermaid sekce stavov\u00e9ho stroje Opportunity (f\u00e1ze / p\u0159echody).</li> </ul> <p>Aktualizujte p\u0159i zm\u011bn\u011b obchodn\u00ed logiky, nov\u00fdch modulech nebo zm\u011bn\u011b datov\u00fdch pravidel.</p>"},{"location":"02-architecture/git-publishing/","title":"Publikace na GitHub &amp; Release Workflow","text":"<p>Tato sekce definuje standard pro nahr\u00e1n\u00ed a \u00fadr\u017ebu repozit\u00e1\u0159e na GitHubu.</p>"},{"location":"02-architecture/git-publishing/#1-cile","title":"1. C\u00edle","text":"<ul> <li>Reprodukovateln\u00e9 buildy</li> <li>Auditovateln\u00e1 historie (changelog, ADR)</li> <li>Ochrana tajemstv\u00ed (\u017e\u00e1dn\u00e9 kl\u00ed\u010de v git historii)</li> <li>Automatick\u00e1 validace (CI gates)</li> </ul>"},{"location":"02-architecture/git-publishing/#2-priprava-pred-prvnim-push","title":"2. P\u0159\u00edprava p\u0159ed prvn\u00edm push","text":"<p>Kontroln\u00ed seznam: 1. <code>.gitignore</code> pokr\u00fdv\u00e1 <code>vendor/</code>, <code>node_modules/</code>, runtime a <code>.env</code> (hotovo \u2013 viz root). 2. <code>APP_KEY</code> nen\u00ed commitnut (jen v CI se generuje). 3. \u017d\u00e1dn\u00e9 tajn\u00e9 tokeny ve zdroj\u00edch: grep <code>OPENROUTER_API_KEY</code>, <code>API_KEY</code>, <code>PASSWORD</code> \u2013 pouze placeholdery. 4. <code>docs/01-intro/changelog.md</code> m\u00e1 prvn\u00ed verzi vX.Y.Z. 5. CI workflow <code>.github/workflows/ci.yml</code> existuje (testy, docs, changelog validace). 6. <code>LICENSE</code> (TODO pokud m\u00e1 b\u00fdt ve\u0159ejn\u00e9). 7. <code>README.md</code> (TODO \u2013 stru\u010dn\u00fd p\u0159ehled a odkaz na docs).</p>"},{"location":"02-architecture/git-publishing/#3-inicializace-repozitare","title":"3. Inicializace repozit\u00e1\u0159e","text":"<pre><code>git init\ngit add .\ngit commit -m \"chore: initial commit\"\ngit branch -M main\ngit remote add origin git@github.com:ORG/REPO.git\ngit push -u origin main\n</code></pre>"},{"location":"02-architecture/git-publishing/#4-verzovani","title":"4. Verzov\u00e1n\u00ed","text":"<p>Strategie: SemVer (MAJOR.MINOR.PATCH). - PATCH: opravy bez dopadu na API / sch\u00e9ma - MINOR: nov\u00e9 funkce kompatibiln\u00ed - MAJOR: nekompatibiln\u00ed zm\u011bny / migra\u010dn\u00ed kroky</p> <p>Tagging release: <pre><code>VERSION=v0.1.1\ngit tag -a $VERSION -m \"Release $VERSION\"\ngit push origin $VERSION\n</code></pre></p>"},{"location":"02-architecture/git-publishing/#5-changelog-flow","title":"5. Changelog Flow","text":"<ol> <li>Ka\u017ed\u00fd PR mus\u00ed obsahovat p\u0159\u00edkaz (lok\u00e1ln\u011b) <code>php artisan changelog:add TYPE \"Shrnut\u00ed\" ...</code></li> <li>CI validuje form\u00e1t.</li> <li>P\u0159i tagov\u00e1n\u00ed se NEedituje minul\u00e1 historie.</li> </ol>"},{"location":"02-architecture/git-publishing/#6-release-checklist","title":"6. Release Checklist","text":"Krok Popis Stav Testy <code>phpunit</code> zelen\u00e9 Changelog Nov\u00e1 polo\u017eka p\u0159\u00edtomna Dokumentace <code>composer docs</code> bez diffu Migrace Nov\u00e9 migrace otestov\u00e1ny na staging Bezpe\u010dnost \u017d\u00e1dn\u00e9 tajemstv\u00ed v diffu Build assets <code>npm run build</code> lok\u00e1ln\u011b ov\u011b\u0159eno Z\u00e1loha DB Spu\u0161t\u011bn manu\u00e1ln\u00ed backup p\u0159ed deploymentem"},{"location":"02-architecture/git-publishing/#7-ochrana-tajemstvi","title":"7. Ochrana tajemstv\u00ed","text":"<ul> <li>V\u0161echny runtime kl\u00ed\u010de pouze v <code>.env</code> / secret store (GitHub Actions secrets).</li> <li>P\u0159idat pozd\u011bji: skript <code>scripts/scan-secrets.sh</code> (TODO) + CI krok.</li> </ul>"},{"location":"02-architecture/git-publishing/#8-github-actions-dalsi-doporuceni","title":"8. GitHub Actions \u2013 dal\u0161\u00ed doporu\u010den\u00ed","text":"<p>Mo\u017en\u00e9 budouc\u00ed kroky: - Cache <code>node_modules</code> + build artefakt\u016f - Coverage report + badge - Security scan (Trivy) pro Docker image</p>"},{"location":"02-architecture/git-publishing/#9-rollback-strategie","title":"9. Rollback Strategie","text":"<ul> <li>Minor release lze revertovat <code>git revert</code> merge commit.</li> <li>P\u0159ed MAJOR: export DB sch\u00e9matu + z\u00e1loha.</li> <li>Dokumentovat breaking changes v samostatn\u00e9 sekci changelogu.</li> </ul>"},{"location":"02-architecture/git-publishing/#10-todo-dalsi-rozsireni","title":"10. TODO / Dal\u0161\u00ed roz\u0161\u00ed\u0159en\u00ed","text":"<ul> <li>[ ] README doplnit</li> <li>[ ] LICENSE vybrat (MIT / proprietary)</li> <li>[ ] Secrets scanning (Gitleaks)</li> <li>[ ] Automatick\u00e9 generov\u00e1n\u00ed release notes z changelogu</li> </ul> <p>Aktualizace t\u00e9to str\u00e1nky mus\u00ed prob\u011bhnout p\u0159i zm\u011bn\u011b release procesu nebo bezpe\u010dnostn\u00edch z\u00e1sad.</p>"},{"location":"02-architecture/infrastructure/","title":"Infrastruktura &amp; Prost\u0159ed\u00ed","text":""},{"location":"02-architecture/infrastructure/#domena-url","title":"Dom\u00e9na / URL","text":"<ul> <li>Prim\u00e1rn\u00ed dom\u00e9na (aktu\u00e1ln\u00ed instance): <code>https://ce1.opent2.com</code></li> <li>Dokumentace staticky serv\u00edrovan\u00e1 na: <code>https://ce1.opent2.com/crm-docs/</code></li> <li>Reverzn\u00ed proxy / router: Traefik (extern\u00ed s\u00ed\u0165 <code>web</code>).</li> </ul>"},{"location":"02-architecture/infrastructure/#vps-host","title":"VPS / Host","text":"<ul> <li>Linux VPS (typ: standard x86_64) \u2013 parametry CPU/RAM nejsou v repozit\u00e1\u0159i; doplnit do ADR pokud budou SLA.</li> <li>Perzistence dat: host adres\u00e1\u0159e pod <code>/srv/volumes/crm/*</code> a <code>/srv/backups/crm/*</code>.</li> </ul>"},{"location":"02-architecture/infrastructure/#docker-sluzby-docker-compose","title":"Docker Slu\u017eby (docker-compose)","text":"Service Image \u00da\u010del Persistentn\u00ed volume db mysql:8.0 Prim\u00e1rn\u00ed MySQL datab\u00e1ze <code>/srv/volumes/crm/mysql-data</code> redis redis:alpine Cache / queue backend <code>/srv/volumes/crm/redis-data</code> qdrant qdrant/qdrant:latest Vector store (knowledge) <code>/srv/volumes/crm/qdrant-data</code> app crmeslcz-crm-app (Dockerfile.app) PHP-FPM / Laravel aplikace bind <code>/srv/volumes/crm/src</code> scheduler crmeslcz-crm-scheduler Laravel schedule worker bind source + logs queue crmeslcz-crm-queue Queue worker (jobs) bind source + logs embedder crmeslcz-embedder Embedding service (extern\u00ed API vol\u00e1n\u00ed) n/a playwright crmeslcz-playwright-runner E2E / scraping / test automace n/a web nginx:1.27-alpine HTTP server + statick\u00e9 docs bind source + logs mailhog mailhog/mailhog Lok\u00e1ln\u00ed SMTP testing ephemeral"},{"location":"02-architecture/infrastructure/#sitova-topologie","title":"S\u00ed\u0165ov\u00e1 Topologie","text":"<ul> <li>Intern\u00ed s\u00ed\u0165: <code>crm-internal</code> (app, db, redis, qdrant, workers, embedder, playwright, mailhog)</li> <li>Extern\u00ed: <code>web</code> (Traefik + web container)</li> <li>Traefik sm\u011bruje host <code>ce1.opent2.com</code> na service <code>web</code> port 80.</li> </ul>"},{"location":"02-architecture/infrastructure/#healthchecks","title":"Healthchecks","text":"Service Test Interval Retry db <code>mysqladmin ping</code> 30s 5 redis <code>redis-cli ping</code> 30s 5 qdrant HTTP GET <code>/collections</code> 30s 5 app <code>php -v</code> 30s 5 web HTTP GET <code>/healthz</code> 20s 5"},{"location":"02-architecture/infrastructure/#logy-soubory","title":"Logy &amp; Soubory","text":"Path Popis <code>/srv/volumes/crm/src</code> Aplika\u010dn\u00ed zdrojov\u00fd k\u00f3d (bind) <code>/srv/volumes/crm/logs/php</code> PHP-FPM / app logy <code>/srv/volumes/crm/logs/nginx</code> Nginx access/error <code>/srv/volumes/crm/mysql-data</code> Datov\u00e9 soubory MySQL <code>/srv/volumes/crm/redis-data</code> Redis persistence <code>/srv/volumes/crm/qdrant-data</code> Qdrant storage <code>/srv/backups/crm</code> Z\u00e1lohy + verify + reporty <code>/srv/backups/crm/reports</code> Markdown reporty generovan\u00e9 jobem"},{"location":"02-architecture/infrastructure/#zalohy-verify","title":"Z\u00e1lohy &amp; Verify","text":"<ul> <li>Spou\u0161t\u011bn\u00e9 joby: <code>RunBackupJob</code>, <code>RunVerifyRestoreJob</code>, <code>GenerateBackupReportJob</code>, <code>EvaluateBackupHealthJob</code>.</li> <li>Reporty sumarizov\u00e1ny v <code>backup-report-latest.md</code> (generov\u00e1no).</li> <li>Verifikace: import dumpu do temp DB + sanity checks.</li> </ul>"},{"location":"02-architecture/infrastructure/#build-deploy","title":"Build &amp; Deploy","text":"Oblast Mechanismus Dok. generace <code>php artisan docs:refresh</code> + MkDocs (Material) -&gt; <code>public/crm-docs</code> CI GitHub Actions <code>ci.yml</code> (tests, lint, docs diff) Frontend assets Vite (viz <code>npm run dev</code> v <code>composer dev</code> skriptu)"},{"location":"02-architecture/infrastructure/#bezpecnost-konfigurace","title":"Bezpe\u010dnost / Konfigurace","text":"<ul> <li><code>.env</code> hodnoty (viz <code>.env.example</code>): DB, Redis, RESTIC, ActiveCampaign, OPS_* prahy.</li> <li>Slack alerting: <code>ALERT_SLACK_WEBHOOK</code> (pokud nen\u00ed nastaveno, tich\u00fd re\u017eim alert\u016f).</li> <li>Opr\u00e1vn\u011bn\u00ed: Spatie Role/Permission (dokumentov\u00e1no v <code>permissions.md</code>).</li> </ul>"},{"location":"02-architecture/infrastructure/#doporucene-budouci-vylepseni-infra","title":"Doporu\u010den\u00e9 Budouc\u00ed Vylep\u0161en\u00ed (Infra)","text":"T\u00e9ma N\u00e1vrh P\u0159\u00ednos Observability P\u0159idat Prometheus scrape (extern\u00ed) + Grafana dashboard Viditelnost trend\u016f Logs struktura JSON log channel pro ops a access Snadn\u00e1 agregace / filtrace Backups integrity Periodick\u00fd SHA256 audit + random restore drill Vy\u0161\u0161\u00ed jistota obnovy Rate Limiting P\u0159idat konfigurovateln\u00e9 limity na kritick\u00e9 API (knowledge ingest) Ochrana v\u00fdkonu Secrets management Vault / SSM m\u00edsto prost\u00e9ho <code>.env</code> Bezpe\u010dnost <p>Aktualizovat p\u0159i zm\u011bn\u011b docker-compose, p\u0159id\u00e1n\u00ed slu\u017eeb nebo zm\u011bn\u011b cest.</p>"},{"location":"02-architecture/overview/","title":"Architektura \u2013 P\u0159ehled","text":"<p>High-level popis (doplnit diagramy).</p>"},{"location":"02-architecture/testing-strategy/","title":"Testovac\u00ed Strategie","text":""},{"location":"02-architecture/testing-strategy/#aktualni-stav-testu","title":"Aktu\u00e1ln\u00ed Stav Test\u016f","text":"Typ Sou\u010dasn\u00e9 pokryt\u00ed / p\u0159\u00edklady Feature (HTTP) Ops dashboard p\u0159\u00edstup &amp; permission testy, metrics endpoint (status + obsah) Unit <code>BackupStatusService</code> edge case (missing dir), ops help konfig testy Factories Model factories vyu\u017e\u00edv\u00e1ny v feature testech (User, OpsActivity) Datab\u00e1ze RefreshDatabase (sqlite fallback / migrace) <p>Uk\u00e1zkov\u00e9 existuj\u00edc\u00ed testy: - <code>tests/Feature/OpsMetricsContentTest.php</code> \u2013 validace metrik a gauge n\u00e1zv\u016f. - <code>tests/Feature/OpsDashboardAccessTest.php</code> \u2013 autorizace zobrazen\u00ed. - <code>tests/Unit/BackupStatusServiceTest.php</code> \u2013 logika fallbacku.</p>"},{"location":"02-architecture/testing-strategy/#gaps-chybejici-oblasti","title":"Gaps / Chyb\u011bj\u00edc\u00ed Oblasti","text":"Oblast Chyb\u00ed D\u016fsledek Dom\u00e9nov\u00e9 modely (scopes) Testy Opportunity lifecycle (won/lost), Contact normalizace Riziko regres\u00ed v business logice ActiveCampaign sync Mock API + delta sync sc\u00e9n\u00e1\u0159e (rate limit, offset reset) Nezaji\u0161t\u011bn\u00e1 robustnost integrace Knowledge ingestion Pipeline (upload \u2192 chunk \u2192 embedding \u2192 index) Skryt\u00e1 selh\u00e1n\u00ed p\u0159i zm\u011bn\u00e1ch embedding provider\u016f Permissions Seed &amp; enforcement test (ops.view vs. ostatn\u00ed) Tich\u00e9 opr\u00e1vn\u011bn\u00ed chyby Queue jobs Idempotence + retry logic testy Potenci\u00e1ln\u00ed duplikace / race conditions Schedule Kontrola, \u017ee kritick\u00e9 joby jsou napl\u00e1nov\u00e1ny (snapshot test) Necht\u011bn\u00e9 vypu\u0161t\u011bn\u00ed \u00falohy Backup verify Simulace fake dump + verify log parsing Verify m\u016f\u017ee degradovat bez pov\u0161imnut\u00ed API Rate limiting Throttle testy (chat, search) Mo\u017en\u00e9 DoS chov\u00e1n\u00ed Metrics coverage Test p\u0159\u00edtomnosti v\u0161ech o\u010dek\u00e1van\u00fdch metrik (snapshot) Tich\u00e1 ztr\u00e1ta metrik"},{"location":"02-architecture/testing-strategy/#doporuceny-roadmap-testu","title":"Doporu\u010den\u00fd Roadmap Test\u016f","text":"<ol> <li>Domain Behavior Suite</li> <li>Opportunitiy: transitions \u2192 won/lost sets closed_at; probability guard.</li> <li>Contact: email/phone normalization (valid/invalid cases).</li> <li>Integrace: ActiveCampaign Mock Server</li> <li>Simulace 200, 403 (rate limit), sch\u00e9ma zm\u011bna (neo\u010dek\u00e1van\u00e9 pole) \u2013 o\u010dek\u00e1van\u00e9 handling.</li> <li>Knowledge Pipeline</li> <li>Fake text upload \u2192 generovan\u00fd po\u010det chunk\u016f \u2192 index existence.</li> <li>Permissions &amp; ACL</li> <li>Matrix test: role vs. resource gates (403 vs 200) \u2013 snapshot.</li> <li>Backup / Verify E2E (tag @slow)</li> <li>Generovat mal\u00fd test dump + verify restore job \u2192 assert OpsActivity success.</li> <li>Schedule Assertions</li> <li>Test, \u017ee Kernel obsahuje o\u010dek\u00e1van\u00e9 patterny (regex extrakce).</li> <li>Metrics Snapshot</li> <li>Generace kontroln\u00edho seznamu metrik do fixture, test porovn\u00e1 set (ignoruje hodnoty).</li> <li>Job Idempotence</li> <li>Spu\u0161t\u011bn\u00ed jobu dvakr\u00e1t (nap\u0159. ActiveCampaignSyncJob) \u2013 bez duplik\u00e1t\u016f / ztr\u00e1t.</li> </ol>"},{"location":"02-architecture/testing-strategy/#nastroje-a-praktiky","title":"N\u00e1stroje a Praktiky","text":"T\u00e9ma Doporu\u010den\u00ed Test dat Minim\u00e1ln\u00ed factories; \u017e\u00e1dn\u00e9 masivn\u00ed seedery v unit testech Izolace integrac\u00ed Mock HTTP (HTTP::fake) pro ActiveCampaign/Qdrant v unit level Rychl\u00e9 zp\u011btn\u00e9 vazby Odd\u011blit <code>@slow</code> skupinu (verify, pipeline) do separ\u00e1tn\u00edho GitHub jobu Coverage P\u0159idat <code>Xdebug</code> nebo <code>pcov</code> jen v coverage workflow (voliteln\u00e9) Mutace Striker / Infection (voliteln\u011b) pro kritick\u00e9 business funkce"},{"location":"02-architecture/testing-strategy/#metriky-kvality-cilove","title":"Metriky Kvality (c\u00edlov\u00e9)","text":"Metrika C\u00edl Feature business kritick\u00e9 flows pokryty \u2265 80% kritick\u00fdch cest Integrace (mock sc\u00e9n\u00e1\u0159e) \u2265 3 kl\u00ed\u010dov\u00e9 varianty na integraci Idempotence job\u016f testov\u00e1na Top 5 kritick\u00fdch job\u016f Permission matrix test 100% definovan\u00fdch gate rout"},{"location":"02-architecture/testing-strategy/#priklad-template-pro-novy-feature-test","title":"P\u0159\u00edklad Template pro Nov\u00fd Feature Test","text":"<pre><code>public function test_contact_email_is_normalized(): void\n{\n    $user = User::factory()-&gt;create();\n    $this-&gt;actingAs($user);\n    $resp = $this-&gt;post('/crm/contacts', [\n        'first_name' =&gt; 'John',\n        'last_name' =&gt; 'Doe',\n        'email' =&gt; '  JOHN.DOE+tag@Example.COM  ',\n    ]);\n    $resp-&gt;assertRedirect();\n    $contact = Contact::first();\n    $this-&gt;assertEquals('john.doe@example.com', $contact-&gt;normalized_email);\n}\n</code></pre> <p>Aktualizovat p\u0159i p\u0159id\u00e1n\u00ed nov\u00fdch integra\u010dn\u00edch slu\u017eeb nebo modul\u016f.</p>"},{"location":"03-domain/domain-model/","title":"Dom\u00e9nov\u00fd Model (Inicialn\u00ed Skeleton)","text":"<p>Tento dokument je dopln\u011bn: ERD (generov\u00e1no), Model Fields a DB Schema (generov\u00e1no). N\u00ed\u017ee jsou shrnut\u00e9 popisy dom\u00e9nov\u00fdch entit.</p>"},{"location":"03-domain/domain-model/#entity-z-appmodels","title":"Entity (z <code>app/Models</code>)","text":"Model Popis Company Firma / \u00fa\u010det; dr\u017e\u00ed z\u00e1kladn\u00ed profil (odv\u011btv\u00ed, velikost, revenue) a agreguje kontakty, p\u0159\u00edle\u017eitosti, projekty a objedn\u00e1vky. Contact Osoba spojen\u00e1 s firmou; obsahuje normalizaci emailu/telefonu a marketing status. ContactCustomField Dynamick\u00e9 (kl\u00ed\u010d, hodnota, typ) roz\u0161\u00ed\u0159en\u00ed kontaktu + mapov\u00e1n\u00ed na AC field. ContactIdentity Extern\u00ed identity kontaktu (zdroj, external_id/hash) pro deduplikaci. Deal Dohoda nav\u00e1zan\u00e1 na Opportunity (kontrakt / fin\u00e1ln\u00ed f\u00e1ze) se stavem podpisu. KnowledgeChunk Jeden vektorov\u00fd chunk dokumentu (text + embedding + metadata + qdrant_point_id). KnowledgeDocument Zdrojov\u00fd dokument pro znalostn\u00ed b\u00e1zi (stav indexace, embedding meta, po\u010dty chunk\u016f). KnowledgeNote Ru\u010dn\u011b psan\u00e1 pozn\u00e1mka u\u017eivatele s tagy (ne v\u017edy vektorizov\u00e1no). Lead (TBD \u2013 soubor nen\u00ed dopln\u011bn / z\u0159ejm\u011b budouc\u00ed f\u00e1ze) Opportunity Obchodn\u00ed p\u0159\u00edle\u017eitost s f\u00e1zemi (stage, probability, expected_close_date). OpsActivity Z\u00e1znam o provozn\u00ed aktivit\u011b (backup, verifikace, atd.) v\u010detn\u011b \u010dasov\u00e9ho pr\u016fb\u011bhu. ProductGroup (TBD \u2013 strom kategori\u00ed / produktov\u00fdch skupin \u2013 chyb\u00ed model ve v\u00fdpisu find) Project Projekt (\u010dasov\u00e9 obdob\u00ed / definovan\u00fd c\u00edl) nav\u00e1zan\u00fd na firmu/kontakt, agreguje \u00fakoly. SalesOrder Prodejn\u00ed objedn\u00e1vka (order_date, total_amount) nav\u00e1zan\u00e1 na firmu a kontakt. SalesOrderItem Polo\u017eka objedn\u00e1vky (ceny, slevy, skupiny) \u2013 decimal p\u0159esnost zachov\u00e1na pro anal\u00fdzu. SystemSetting Runtime nastaven\u00ed (key/value) s helpery <code>get</code> a <code>set</code>. Tag \u0160t\u00edtky prim\u00e1rn\u011b pro kontakty (pivot contact_tag). Task \u00dakol p\u0159i\u0159aditeln\u00fd k polymorfn\u00ed entit\u011b (Company/Contact/Project) + priority/status. User Autentizovan\u00fd u\u017eivatel (is_admin flag). AcSyncRun Z\u00e1znam b\u011bhu AC synchronizace (offset, counts, sample IDs, message). AppLink Konfigurovateln\u00e9 odkazy v aplikaci (UI launch bord). ChatToolAudit Audit z\u00e1znam interakce AI n\u00e1stroje (payload + result_meta + duration)."},{"location":"03-domain/domain-model/#vztahy-vyber","title":"Vztahy (v\u00fdb\u011br)","text":"<ul> <li>Company 1:N Contact / Opportunity / Project / SalesOrder</li> <li>Contact 1:N Opportunity / Project / SalesOrder; M:N Tag</li> <li>Opportunity 1:1 Deal (logick\u00e1 n\u00e1vaznost; nen\u00ed ciz\u00ed kl\u00ed\u010d v uk\u00e1zce \u2013 ov\u011b\u0159it p\u0159i ERD)</li> <li>KnowledgeDocument 1:N KnowledgeChunk</li> <li>SalesOrder 1:N SalesOrderItem</li> <li>Task morphTo (Company|Contact|Project) + p\u0159\u00edm\u00e9 project_id (dual linkage)</li> <li>AcSyncRun izolovan\u00e1 tabulka log\u016f (\u017e\u00e1dn\u00e9 FK) \u2013 nav\u00e1z\u00e1n\u00ed pouze logick\u00e9 p\u0159es \u010das</li> </ul>"},{"location":"03-domain/domain-model/#domain-rules-pocatecni","title":"Domain Rules (po\u010d\u00e1te\u010dn\u00ed)","text":"<ul> <li>Contact: normalizace emailu &amp; telefonu p\u0159i <code>saving</code> \u2013 odfiltrov\u00e1n\u00ed placeholder\u016f.</li> <li>Opportunity: f\u00e1ze <code>won|lost</code> definuj\u00ed uzav\u0159en\u00fd stav (scopes <code>open/closed/won/lost</code>).</li> <li>SalesOrderItem: decimal p\u0159esnost pro ceny a slevy (finan\u010dn\u00ed anal\u00fdza; neagregovat v aplika\u010dn\u00ed vrstv\u011b s floaty).</li> <li>SystemSetting: jedine\u010dnost kl\u00ed\u010de vynucena p\u0159es <code>updateOrCreate</code>.</li> <li>Knowledge* entity: embedding dimenze mus\u00ed b\u00fdt konzistentn\u00ed (p\u0159i zm\u011bn\u011b \u2192 reindex all).</li> </ul>"},{"location":"03-domain/domain-model/#plan-doplneni","title":"Pl\u00e1n dopln\u011bn\u00ed","text":"<ol> <li>Vygenerovat ERD \u2192 <code>docs/16-generated/erd.svg</code> (script add: php artisan docs:erd nebo external tool \u2013 pending).</li> <li>Sloupcov\u00e9 tabulky \u2013 hotovo (viz DB Schema (gen), INFORMATION_SCHEMA introspekce).</li> <li>P\u0159idat sekci \"Lifecycle Events\" (boot hooks: Contact normalizace).</li> <li>P\u0159idat business SLA metriky (lead \u2192 opportunity conversion, opportunity cycle time).</li> </ol>"},{"location":"04-modules/ops/","title":"Ops Modul","text":"<p>Provozn\u00ed (operations) subsyst\u00e9m zaji\u0161\u0165uj\u00edc\u00ed: z\u00e1lohy, ov\u011b\u0159ov\u00e1n\u00ed obnovy, health reporting, audit aktivit.</p>"},{"location":"04-modules/ops/#cile","title":"C\u00edle","text":"<ul> <li>Spolehliv\u00e9 denn\u00ed (a ad-hoc) z\u00e1lohy datab\u00e1ze a aplika\u010dn\u00edch dat.</li> <li>Automatick\u00e1 periodick\u00e1 verifikace obnovitelnosti (restore + sanity checks).</li> <li>Viditelnost: auditn\u00ed trail kl\u00ed\u010dov\u00fdch ops \u00fakon\u016f (<code>ops_activities</code>).</li> <li>Rychl\u00e1 diagnostika probl\u00e9m\u016f (report + Slack notifikace \u2013 pl\u00e1n).</li> </ul>"},{"location":"04-modules/ops/#klicove-jobs","title":"Kl\u00ed\u010dov\u00e9 Jobs","text":"Job Funkce Frekvence <code>RunBackupJob</code> (spatie/backup command) Spou\u0161t\u00ed z\u00e1lohu (files + DB) denn\u011b / manu\u00e1ln\u011b <code>CleanupBackupsJob</code> \u010cist\u00ed star\u00e9 z\u00e1lohy dle retention denn\u011b po backup <code>RunVerifyRestoreJob</code> Vytvo\u0159\u00ed temp DB, importuje posledn\u00ed dump, ov\u011b\u0159\u00ed po\u010dty tabulek/\u0159\u00e1dk\u016f denn\u011b <code>GenerateBackupReportJob</code> Sestav\u00ed Markdown report (p\u0159ehled posledn\u00edch z\u00e1loh) denn\u011b po verify <code>EvaluateBackupHealthJob</code> Vyhodnot\u00ed posledn\u00ed b\u011bhy a nastav\u00ed status (pending) denn\u011b"},{"location":"04-modules/ops/#datove-artefakty","title":"Datov\u00e9 Artefakty","text":"<ul> <li>Slo\u017eka backup storage (S3 / lok\u00e1ln\u00ed volume) \u2013 snapshoty + dumpy.</li> <li>Tabulka <code>ops_activities</code> \u2013 log pr\u016fb\u011bhu (start/finish, status, duration, meta).</li> </ul>"},{"location":"04-modules/ops/#metriky-cilove","title":"Metriky (c\u00edlov\u00e9)","text":"Metrika C\u00edl Pozn\u00e1mka Backup success rate (7d) \u2265 99% Pom\u011br \u00fasp\u011b\u0161n\u00fdch backup job\u016f Verify success rate (7d) \u2265 99% Obnovovac\u00ed testy RPO (max age posledn\u00ed valid backup) &lt; 24h RPO definice Restore duration (min) sledovat trend M\u011b\u0159\u00ed \u010das importu dumpu"},{"location":"04-modules/ops/#exponovany-endpoint-plan","title":"Exponovan\u00fd endpoint (pl\u00e1n)","text":"<p><code>GET /crm/ops/metrics</code> vr\u00e1t\u00ed Prometheus text form\u00e1t, kl\u00ed\u010de (prefix <code>crm_ops_</code>): - <code>crm_ops_last_db_dump_age_minutes</code> - <code>crm_ops_last_verify_restore_age_hours</code> - <code>crm_ops_backup_success_rate_7d</code> - <code>crm_ops_verify_success_rate_7d</code> - <code>crm_ops_restore_duration_seconds_last</code></p> <p>Generov\u00e1no slu\u017ebou <code>BackupStatusService</code> + jednoduch\u00fd controller. Aktualizace ka\u017ed\u00e9 vol\u00e1n\u00ed (on-demand scrape).</p>"},{"location":"04-modules/ops/#alerting-eskalace","title":"Alerting / Eskalace","text":"<ul> <li>(Pl\u00e1n) Slack webhook p\u0159i: 2\u00d7 po sob\u011b fail verify, chyb\u011bj\u00edc\u00ed dump &gt;24h.</li> <li>Email fallback (cron) pokud Slack sel\u017ee.</li> </ul>"},{"location":"04-modules/ops/#slack-implementace-navrh","title":"Slack implementace (n\u00e1vrh)","text":"<p>Konfig: <code>ALERT_SLACK_WEBHOOK</code>. Slu\u017eba <code>AlertService</code>: <pre><code>public function send(string $event, array $context = []): void {\n    if (!($url = env('ALERT_SLACK_WEBHOOK'))) return;\n    $payload = [\n        'text' =&gt; \"[OPS] $event\".(empty($context)?'':\" ```\".json_encode($context, JSON_UNESCAPED_UNICODE|JSON_PRETTY_PRINT).\"```\")\n    ];\n    Http::timeout(3)-&gt;post($url, $payload);\n}\n</code></pre> Rate-limit: jednoduch\u00fd cache kl\u00ed\u010d <code>ops_alert_{$event}</code> TTL 5m pro potla\u010den\u00ed bou\u0159\u00ed.</p>"},{"location":"04-modules/ops/#proces-restore-automaticky-test","title":"Proces Restore (automatick\u00fd test)","text":"<ol> <li>Vytvo\u0159en\u00ed do\u010dasn\u00e9 DB (n\u00e1zev s prefixem <code>verify_</code>).</li> <li>Import posledn\u00edho dumpu (<code>mysql &lt; file.sql.gz</code>).</li> <li>Ov\u011b\u0159en\u00ed: po\u010det tabulek, sampling kl\u00ed\u010dov\u00fdch \u2013 Companies, Contacts.</li> <li>Drop temporary DB.</li> </ol>"},{"location":"04-modules/ops/#roadmap","title":"Roadmap","text":"<ul> <li>P\u0159idat metriky do Promethea / pushgateway.</li> <li>P\u0159idat export reportu do <code>docs/16-generated/backup-report.md</code>.</li> <li>Integrace Slack alert\u016f.</li> <li>Automatick\u00fd cleanup ne\u00fasp\u011b\u0161n\u00fdch temp DB p\u0159i restartu.</li> </ul>"},{"location":"04-modules/ops/#bezpecnostni-poznamky","title":"Bezpe\u010dnostn\u00ed Pozn\u00e1mky","text":"<ul> <li>Dumpy dr\u017eet jen na priv\u00e1tn\u00edm storage (necommitovat).</li> <li>Skr\u00fdt citliv\u00e9 hodnoty ve reportu (hash/email anonymizace budouc\u00ed).</li> </ul>"},{"location":"05-integrations/activecampaign/","title":"Integrace: ActiveCampaign","text":""},{"location":"05-integrations/activecampaign/#ucel","title":"\u00da\u010del","text":"<p>Pravideln\u00e1 inkrement\u00e1ln\u00ed synchronizace kontakt\u016f z ActiveCampaign do intern\u00edch tabulek (kontakty, identity, log \u0161ar\u017e\u00ed <code>ac_sync_runs</code>).</p>"},{"location":"05-integrations/activecampaign/#flow-zjednoduseno","title":"Flow (zjednodu\u0161eno)","text":"<ol> <li>Scheduled job <code>ActiveCampaignSyncJob</code> b\u011b\u017e\u00ed ka\u017edou minutu.</li> <li>Z DB (SystemSetting) \u010dte offset <code>ac_sync_offset</code> a flag <code>ac_sync_enabled</code>.</li> <li>Vol\u00e1 AC API <code>GET /contacts</code> se str\u00e1nkov\u00e1n\u00edm (limit, offset, order by cdate DESC).</li> <li>Importer normalizuje &amp; mapuje pole \u2192 vytvo\u0159\u00ed / aktualizuje kontakty.</li> <li>Ulo\u017e\u00ed nov\u00fd offset (posun o po\u010det zpracovan\u00fdch).</li> </ol>"},{"location":"05-integrations/activecampaign/#modely-tabulky","title":"Modely / tabulky","text":"<ul> <li><code>contacts</code> / <code>contact_identities</code> \u2013 c\u00edlov\u00e1 data.</li> <li><code>ac_sync_runs</code> \u2013 pr\u016fb\u011bh synchronizac\u00ed (offset, po\u010dty, chybov\u00e9 stavy).</li> <li><code>system_settings</code> \u2013 runtime p\u0159ep\u00edna\u010de.</li> </ul>"},{"location":"05-integrations/activecampaign/#konfigurace-nastaveni","title":"Konfigurace / nastaven\u00ed","text":"Kl\u00ed\u010d SystemSetting V\u00fdznam ac_sync_enabled Povolit / zak\u00e1zat automatickou \u0161ar\u017ei ac_sync_offset Aktu\u00e1ln\u00ed offset v AC str\u00e1nkov\u00e1n\u00ed <p>ENV prom\u011bnn\u00e9 (viz <code>.env.example</code>): <code>AC_BASE_URL</code>, <code>AC_API_TOKEN</code>.</p>"},{"location":"05-integrations/activecampaign/#failure-modes","title":"Failure Modes","text":"Sc\u00e9n\u00e1\u0159 Detekce Mitigace Rate limit / 403 Importer vr\u00e1t\u00ed soft-fail (<code>ok=false</code>) Job skon\u010d\u00ed OK bez posunu offsetu, log warning API zm\u011bna sch\u00e9matu V\u00fdjimka v importeru Alert v logu, manu\u00e1ln\u00ed z\u00e1sah Desynchronizace offsetu Skok v po\u010dtu kontakt\u016f Ru\u010dn\u00ed reset offsetu (SystemSetting)"},{"location":"05-integrations/activecampaign/#alerting","title":"Alerting","text":"<ul> <li>(Pl\u00e1n) Slack notifikace p\u0159i opakovan\u00e9 soft-fail sekvenci.</li> </ul>"},{"location":"05-integrations/activecampaign/#manualni-spusteni","title":"Manu\u00e1ln\u00ed spu\u0161t\u011bn\u00ed","text":"<p><pre><code>php artisan queue:dispatch \"App\\\\Jobs\\\\ActiveCampaignSyncJob\"\n</code></pre> (Alternativn\u011b tinker a new instance s force=true.)</p>"},{"location":"05-integrations/activecampaign/#rozsireni","title":"Roz\u0161\u00ed\u0159en\u00ed","text":"<ul> <li>Delta sync zm\u011bn\u011bn\u00fdch od ur\u010dit\u00e9ho \u010dasu.</li> <li>Webhook push re\u017eim.</li> </ul>"},{"location":"05-integrations/embeddings-providers/","title":"Embeddings Providers","text":"<p>Shrnut\u00ed podporovan\u00fdch poskytovatel\u016f v <code>EmbeddingsService</code>.</p> Provider Auth Endpoint Omezen\u00ed Pozn\u00e1mky openai Bearer token https://api.openai.com/v1/embeddings D\u00e9lka input ~8k token\u016f Standardn\u00ed JSON form\u00e1t (data[0].embedding) gemini API key v URL param https://generativelanguage.googleapis.com/...:embedContent Limit textu ~8k Struktura embedding.embedding.values openrouter Bearer token + voliteln\u00e9 hlavi\u010dky https://openrouter.ai/api/v1/embeddings Model n\u00e1zev s vendor prefixem OpenAI-kompatibiln\u00ed struktura local \u017e\u00e1dn\u00fd (intern\u00ed) http://embedder:8080/embeddings Podle vlastn\u00ed slu\u017eby Vrac\u00ed pole vectors[0]"},{"location":"05-integrations/embeddings-providers/#runtime-prepinace-systemsetting-klice","title":"Runtime p\u0159ep\u00edna\u010de (SystemSetting kl\u00ed\u010de)","text":"Kl\u00ed\u010d V\u00fdznam Fallback embeddings.provider Aktivn\u00ed provider config/qdrant.php embeddings.model N\u00e1zev modelu config embeddings.openai_api_key API kl\u00ed\u010d env OPENAI_API_KEY embeddings.gemini_api_key API kl\u00ed\u010d env GOOGLE_GEMINI_API_KEY embeddings.openrouter_api_key API kl\u00ed\u010d env OPENROUTER_API_KEY embeddings.local_url URL lok\u00e1ln\u00ed slu\u017eby env EMBEDDINGS_LOCAL_URL embeddings.dimension Fixn\u00ed dimenze config / inference"},{"location":"05-integrations/embeddings-providers/#chovani-pri-chybe","title":"Chov\u00e1n\u00ed p\u0159i chyb\u011b","text":"<ul> <li>Chyb\u011bj\u00edc\u00ed kl\u00ed\u010d \u2192 metoda vrac\u00ed <code>null</code>.</li> <li>HTTP ne-200 \u2192 <code>null</code>.</li> <li>Nevalidn\u00ed JSON / struktura \u2192 <code>null</code> (volaj\u00edc\u00ed rozhodne o fallbacku nebo skipu).</li> </ul>"},{"location":"05-integrations/embeddings-providers/#doporuceni","title":"Doporu\u010den\u00ed","text":"<ul> <li>Uchovat dimenzi embedding\u016f konzistentn\u00ed po celou dobu (zm\u011bna vy\u017eaduje reindex kolekce).</li> <li>Logovat m\u00edru selh\u00e1n\u00ed embedding fetch (prom\u011bnn\u00e9 metriky budouc\u00ed roz\u0161\u00ed\u0159en\u00ed).</li> </ul>"},{"location":"05-integrations/qdrant/","title":"Integrace: Qdrant","text":"<p>Vektorov\u00fd vyhled\u00e1vac\u00ed backend pro znalostn\u00ed b\u00e1zi.</p>"},{"location":"05-integrations/qdrant/#ucel","title":"\u00da\u010del","text":"<p>Umo\u017e\u0148uje semantick\u00e9 vyhled\u00e1v\u00e1n\u00ed p\u0159es embeddings dokument\u016f (notes, files) pro intern\u00ed znalostn\u00ed asistenci.</p>"},{"location":"05-integrations/qdrant/#komponenty","title":"Komponenty","text":"<ul> <li><code>QdrantClient</code> \u2013 HTTP wrapper (kolekce, upsert, search, count, deleteByFilter)</li> <li><code>EmbeddingsService</code> \u2013 abstrakce nad poskytovateli embedding\u016f (OpenAI / Gemini / OpenRouter / Local)</li> <li><code>IndexKnowledgeDocumentJob</code> (odhad dle n\u00e1zvu) \u2013 indexace obsahu</li> </ul>"},{"location":"05-integrations/qdrant/#konfigurace-configqdrantphp","title":"Konfigurace (<code>config/qdrant.php</code>)","text":"Kl\u00ed\u010d V\u00fdznam enabled Glob\u00e1ln\u00ed p\u0159ep\u00edna\u010d url Z\u00e1kladn\u00ed URL Qdrant API api_key API kl\u00ed\u010d pokud vy\u017eadov\u00e1no collection N\u00e1zev kolekce embeddings.provider openai / gemini / openrouter / local embeddings.model Model jm\u00e9na dle provideru embeddings.dimension Voliteln\u00e9 p\u0159eps\u00e1n\u00ed dimenze"},{"location":"05-integrations/qdrant/#embedding-providers","title":"Embedding Providers","text":"Provider Vol\u00e1n\u00ed Pozn\u00e1mka openai POST /v1/embeddings Vy\u017eaduje OPENAI_API_KEY gemini POST generativelanguage.googleapis.com ...:embedContent Rate limit odli\u0161n\u00fd openrouter POST /api/v1/embeddings Normalizace modelu s vendor prefixem local POST /embeddings (internal service) Normalizace vectoru (normalize=true)"},{"location":"05-integrations/qdrant/#failure-modes","title":"Failure Modes","text":"Sc\u00e9n\u00e1\u0159 Detekce Chov\u00e1n\u00ed Embedding provider bez kl\u00ed\u010de Vr\u00e1ceno null Dokument p\u0159esko\u010den / log debug Timeout HTTP Http::timeout() v\u00fdjimka Vr\u00e1ceno null \u2192 vynechan\u00fd embedding Chybn\u00e1 kolekce (neexistuje) ensureCollection false Recreate nebo log warning Upsert sel\u017ee !ok odpov\u011b\u010f Log warning + pokra\u010dov\u00e1n\u00ed"},{"location":"05-integrations/qdrant/#bezpecnost","title":"Bezpe\u010dnost","text":"<ul> <li>API kl\u00ed\u010de dr\u017eet v env / SystemSetting.</li> <li>Omezit p\u0159\u00edstup Qdrant jen na intern\u00ed s\u00ed\u0165 (docker network <code>crm-internal</code>).</li> </ul>"},{"location":"05-integrations/qdrant/#rozsireni","title":"Roz\u0161\u00ed\u0159en\u00ed","text":"<ul> <li>P\u0159idat batch upsert s retry.</li> <li>P\u0159idat metriky (po\u010det vektor\u016f, latency).</li> </ul>"},{"location":"07-runtime/jobs-catalog/","title":"Job Katalog","text":"<p>(Tento soubor bude \u010d\u00e1ste\u010dn\u011b generov\u00e1n/p\u0159episov\u00e1n skriptem.)</p> Job Queue Popis Pozn\u00e1mky"},{"location":"07-runtime/routes/","title":"Routy (placeholder)","text":"<p>Generov\u00e1no p\u0159\u00edkazem <code>php artisan docs:refresh</code>.</p>"},{"location":"07-runtime/schedule/","title":"Schedule (po\u010d\u00e1te\u010dn\u00ed \u2013 lze generovat pozd\u011bji)","text":"<p>Extrahovat z <code>App/Console/Kernel.php</code>.</p>"},{"location":"12-adr/ADR-20250904-knowledge-subsystem/","title":"ADR: Knowledge Subsystem","text":"<p>Status: Accepted Datum: 2025-09-04</p>"},{"location":"12-adr/ADR-20250904-knowledge-subsystem/#kontext","title":"Kontext","text":"<p>Pot\u0159ebujeme semantick\u00e9 vyhled\u00e1v\u00e1n\u00ed v intern\u00ed znalostn\u00ed b\u00e1zi (pozn\u00e1mky + nahran\u00e9 dokumenty). Po\u017eadavky: rychl\u00e1 indexace, mo\u017enost v\u00edce embedding provider\u016f, jednoduch\u00e9 maz\u00e1n\u00ed a reindex.</p>"},{"location":"12-adr/ADR-20250904-knowledge-subsystem/#rozhodnuti","title":"Rozhodnut\u00ed","text":"<p>Pou\u017eijeme Qdrant jako vektorov\u00fd store + vlastn\u00ed <code>EmbeddingsService</code> abstrakci nad poskytovateli (OpenAI, Gemini, OpenRouter, Local). Dokument se rozsek\u00e1 na chunky (heuristick\u00e1 d\u00e9lka ~1k token\u016f), ka\u017ed\u00fd chunk m\u00e1 embedding ulo\u017een v DB a v kolekci Qdrant. Metadata (provider, model, dimenze) ukl\u00e1d\u00e1me na \u00farovni dokumentu a chunku pro audit.</p>"},{"location":"12-adr/ADR-20250904-knowledge-subsystem/#dusledky","title":"D\u016fsledky","text":"<ul> <li>Snadn\u00e1 v\u00fdm\u011bna provideru bez migrace vektor\u016f (pokud zachov\u00e1 dimenzi) \u2013 p\u0159i zm\u011bn\u011b dimenze reindex.</li> <li>Qdrant kolekce centralizuje semantick\u00e9 dotazy.</li> <li>Z\u00e1vislost na extern\u00edm komponentu (Qdrant) \u2192 monitoring nutn\u00fd.</li> <li>Reindex p\u0159i zm\u011bn\u011b dimenze je n\u00e1kladn\u00fd (batch job).</li> </ul>"},{"location":"12-adr/ADR-20250904-knowledge-subsystem/#alternativy","title":"Alternativy","text":"<ol> <li>Pou\u017e\u00edt pouze lok\u00e1ln\u00ed embedding service + fulltext DB (nedosta\u010duj\u00edc\u00ed relevance).</li> <li>Elastic + dense_vector pole (komplexn\u011bj\u0161\u00ed spr\u00e1va, m\u00e9n\u011b feature pro ANN varianty).</li> </ol>"},{"location":"12-adr/ADR-20250904-knowledge-subsystem/#dalsi-kroky","title":"Dal\u0161\u00ed kroky","text":"<ul> <li>P\u0159idat metriky (po\u010dty chunk\u016f, latency embedding provider\u016f).</li> <li>Implementovat batch reindex command.</li> </ul>"},{"location":"12-adr/ADR-20250904-mkdocs-adopce/","title":"ADR-20250904: Adopce MkDocs + Material pro intern\u00ed dokumentaci","text":"<p>Status: Accepted</p>"},{"location":"12-adr/ADR-20250904-mkdocs-adopce/#kontext","title":"Kontext","text":"<p>Pot\u0159eba udr\u017eovat konzistentn\u00ed, fulltextov\u011b prohled\u00e1vatelnou dokumentaci. P\u016fvodn\u011b pouze Markdown soubory bez strukturovan\u00e9 navigace.</p>"},{"location":"12-adr/ADR-20250904-mkdocs-adopce/#rozhodnuti","title":"Rozhodnut\u00ed","text":"<p>Pou\u017e\u00edt MkDocs + Material theme. Uchovat zdroj v repozit\u00e1\u0159i (Markdown), generovat statick\u00fd web (CI / Docker). Generovan\u00e9 referen\u010dn\u00ed soubory v <code>docs/16-generated</code>.</p>"},{"location":"12-adr/ADR-20250904-mkdocs-adopce/#alternativy","title":"Alternativy","text":"<ul> <li>Docusaurus: t\u011b\u017e\u0161\u00ed stack (React), nadbyte\u010dn\u00e9 pro \u010dist\u011b textov\u00e9 + n\u011bkolik diagram\u016f.</li> <li>GitBook SaaS: vendor lock-in, m\u00e9n\u011b kontroly nad CI.</li> <li>Jigsaw (PHP): men\u0161\u00ed ekosyst\u00e9m plugin\u016f.</li> </ul>"},{"location":"12-adr/ADR-20250904-mkdocs-adopce/#dusledky","title":"D\u016fsledky","text":"<p>Pozitivn\u00ed: rychl\u00e1 navigace, verzov\u00e1n\u00ed, minim\u00e1ln\u00ed runtime n\u00e1klady (statika). Negativn\u00ed: nutn\u00fd build krok, z\u00e1vislost na Python image.</p>"},{"location":"12-adr/ADR-20250904-mkdocs-adopce/#implementace","title":"Implementace","text":"<ol> <li>P\u0159id\u00e1n <code>mkdocs.yml</code>, struktura <code>docs/</code>.</li> <li>P\u0159\u00edkaz <code>docs:refresh</code> generuje routy, schedule, jobs, env matrix.</li> <li>Build skript <code>scripts/docs/build.sh</code> pro Docker pipeline.</li> </ol>"},{"location":"12-adr/ADR-20250904-mkdocs-adopce/#follow-up","title":"Follow-up","text":"<ul> <li>P\u0159idat gener\u00e1tor ERD.</li> <li>Zprovoznit CI job publikace.</li> <li>Doplnit ADR pro Ops modul a Knowledge architekturu.</li> </ul>"},{"location":"12-adr/ADR-20250904-ops-modul/","title":"ADR-20250904: Ops modul strategie z\u00e1loh","text":"<p>Status: Draft</p>"},{"location":"12-adr/ADR-20250904-ops-modul/#kontext","title":"Kontext","text":"<p>Pot\u0159eba standardizovat z\u00e1lohov\u00e1n\u00ed (DB dump + snapshot upload\u016f + verify restore) s auditn\u00ed stopou a dashboardem.</p>"},{"location":"12-adr/ADR-20250904-ops-modul/#rozhodnuti-navrh","title":"Rozhodnut\u00ed (n\u00e1vrh)","text":"<p>Centralizovat orchestrace do Ops modulu (Jobs + UI + tabulka <code>ops_activities</code>) m\u00edsto skript\u016f mimo aplikaci.</p>"},{"location":"12-adr/ADR-20250904-ops-modul/#alternativy","title":"Alternativy","text":"<ul> <li>Extern\u00ed Cron + shell skripty (ni\u017e\u0161\u00ed integrace, obt\u00ed\u017en\u00e9 auditov\u00e1n\u00ed)</li> <li>Specializovan\u00fd backup SaaS (n\u00e1klad, vendor lock)</li> </ul>"},{"location":"12-adr/ADR-20250904-ops-modul/#dusledky","title":"D\u016fsledky","text":"<ul> <li>Integrace s permission modelem, audit log.</li> <li>Snadn\u00e9 roz\u0161\u00ed\u0159en\u00ed o alerty.</li> <li>Aplikace mus\u00ed m\u00edt p\u0159\u00edstup k DB &amp; storage a n\u00e1stroj\u016fm (mysql, restic).</li> </ul>"},{"location":"12-adr/ADR-20250904-ops-modul/#implementace-kroky","title":"Implementace kroky","text":"<ol> <li>Jobs: RunDbBackupJob, RunStorageSnapshotJob, RunVerifyRestoreJob.</li> <li>Audit persist do <code>ops_activities</code>.</li> <li>Cron schedule + EvaluateBackupHealthJob.</li> <li>UI dashboard + kontextov\u00e1 n\u00e1pov\u011bda.</li> </ol>"},{"location":"12-adr/ADR-20250904-ops-modul/#otevrene-otazky","title":"Otev\u0159en\u00e9 ot\u00e1zky","text":"<ul> <li>Git tagging sidecar z\u016fst\u00e1v\u00e1 neimplementov\u00e1no.</li> <li>Verify restore frekvence vs. velikost DB.</li> </ul>"},{"location":"12-adr/ADR-20250904-ops-modul/#follow-up","title":"Follow-up","text":"<ul> <li>P\u0159idat metriky Prometheus endpoint.</li> <li>ADR update po p\u0159ijet\u00ed.</li> </ul>"},{"location":"12-adr/ADR-20250904-permissions-model/","title":"ADR: Permissions Model","text":"<p>Status: Accepted Datum: 2025-09-04</p>"},{"location":"12-adr/ADR-20250904-permissions-model/#kontext","title":"Kontext","text":"<p>Aplikace pot\u0159ebuje jemnozrnn\u00e1 opr\u00e1vn\u011bn\u00ed nad operacemi (\u010dten\u00ed/z\u00e1pis entit, provozn\u00ed akce). Pou\u017eit je bal\u00edk spatie/laravel-permission. Aktu\u00e1ln\u011b neexistuje formalizovan\u00fd seznam rol\u00ed.</p>"},{"location":"12-adr/ADR-20250904-permissions-model/#rozhodnuti","title":"Rozhodnut\u00ed","text":"<p>Pou\u017eijeme dynamick\u00e9 na\u010d\u00edt\u00e1n\u00ed opr\u00e1vn\u011bn\u00ed z DB a generov\u00e1n\u00ed p\u0159ehledu (<code>docs:refresh</code> -&gt; <code>permissions.md</code>). Role budou definov\u00e1ny v migrac\u00edch / seed skriptech (budouc\u00ed) a dokumentace se regeneruje. U\u017eivatel\u00e9 maj\u00ed nav\u00edc boolean <code>is_admin</code> pro full bypass.</p>"},{"location":"12-adr/ADR-20250904-permissions-model/#dusledky","title":"D\u016fsledky","text":"<ul> <li>Rychl\u00e1 \u00fadr\u017eba (UI / seed) bez pot\u0159eby m\u011bnit k\u00f3d.</li> <li>Dokumentace opr\u00e1vn\u011bn\u00ed je v\u017edy po b\u011bhu gener\u00e1toru up-to-date.</li> <li>Pot\u0159eba runtime DB p\u0159i generov\u00e1n\u00ed listu (fallback zpr\u00e1va pokud nen\u00ed dostupn\u00e9).</li> </ul>"},{"location":"12-adr/ADR-20250904-permissions-model/#alternativy","title":"Alternativy","text":"<ol> <li>Hardcodovat policy map v k\u00f3du (m\u00e9n\u011b flexibiln\u00ed).</li> <li>Pouze <code>is_admin</code> + hrub\u00e9 ACL (nedosta\u010duj\u00edc\u00ed pro audit/least-privilege).</li> </ol>"},{"location":"12-adr/ADR-20250904-permissions-model/#dalsi-kroky","title":"Dal\u0161\u00ed kroky","text":"<ul> <li>Definovat baseline role (nap\u0159. <code>sales_rep</code>, <code>sales_manager</code>, <code>ops_admin</code>).</li> <li>P\u0159idat test ov\u011b\u0159uj\u00edc\u00ed \u017ee ka\u017ed\u00e9 permission m\u00e1 p\u0159i\u0159azenou alespo\u0148 jednu roli (po zaveden\u00ed rol\u00ed).</li> </ul>"},{"location":"13-runbooks/ops-runbook/","title":"Ops Runbook (Z\u00e1lohy &amp; Obnova)","text":"<p>P\u0159esunuto z <code>RUNBOOK_OPS.md</code> (origin\u00e1l zachov\u00e1n pro diff). Aktualizace prov\u00e1d\u011bt zde.</p>"},{"location":"13-runbooks/ops-runbook/#1-rychly-stav-checklist","title":"1. Rychl\u00fd stav (Checklist)","text":"Kontrola P\u0159\u00edkaz / Akce O\u010dek\u00e1van\u00fd v\u00fdsledek Posledn\u00ed DB dump st\u00e1rnut\u00ed Web: Ops Dashboard / DB Z\u00e1loha Status OK / St\u00e1\u0159\u00ed &lt; prah STALE Posledn\u00ed snapshot uploads Ops Dashboard / Snapshot Status OK Verify restore fresh Ops Dashboard / Verify Status OK (v\u011bk &lt; verify_overdue_hours) Metriky dostupn\u00e9 GET /crm/ops/metrics HTTP 200 + prom text Posledn\u00ed alert Log <code>storage/logs/ops.log</code> \u017d\u00e1dn\u00e9 nov\u00e9 FAIL alerty"},{"location":"13-runbooks/ops-runbook/#2-manualni-spusteni","title":"2. Manu\u00e1ln\u00ed spu\u0161t\u011bn\u00ed","text":"Akce UI CLI DB Backup Tla\u010d\u00edtko \"Spustit DB Backup\" (alias do budoucna) Snapshot Upload\u016f \"Snapshot Upload\u016f\" (stejn\u00e9) Verify Restore \"Verify Restore\" (stejn\u00e9) Report \"Report\" pl\u00e1novan\u00e9"},{"location":"13-runbooks/ops-runbook/#3-obnova-disaster-recovery-scenar-db-korupce","title":"3. Obnova (Disaster Recovery) \u2013 sc\u00e9n\u00e1\u0159 DB korupce","text":"<ol> <li>Identifikuj posledn\u00ed validn\u00ed dump: <code>/srv/backups/crm/db/full-YYYYmmdd-HHMM.sql.gz</code> + ov\u011b\u0159 <code>sha256sum -c full-*.sql.gz.sha256</code>.</li> <li>P\u0159iprav pr\u00e1zdnou n\u00e1hradn\u00ed DB.</li> <li>Import: <pre><code>gunzip -c full-YYYYmmdd-HHMM.sql.gz | mysql -h &lt;host&gt; -u &lt;user&gt; -p &lt;dbname&gt;\n</code></pre></li> <li>Ov\u011b\u0159en\u00ed: tabulky vs. verify log, kritick\u00e9 tabulky existuj\u00ed.</li> <li>\u00daprava <code>.env</code> DB host a redeploy.</li> <li>Spus\u0165 Verify Restore ru\u010dn\u011b.</li> </ol>"},{"location":"13-runbooks/ops-runbook/#4-castecna-obnova-nahranych-souboru","title":"4. \u010c\u00e1ste\u010dn\u00e1 obnova nahran\u00fdch soubor\u016f","text":"<ol> <li>List snapshot\u016f: <pre><code>RESTIC_PASSWORD=$RESTIC_PASSWORD restic -r $RESTIC_REPO snapshots --tag uploads\n</code></pre></li> <li>Obnova: <pre><code>RESTIC_PASSWORD=$RESTIC_PASSWORD restic -r $RESTIC_REPO restore &lt;snapshot-id&gt; --target /tmp/restore_uploads\n</code></pre></li> <li>Selektivn\u00ed kopie zp\u011bt.</li> </ol>"},{"location":"13-runbooks/ops-runbook/#5-verify-restore-interni-workflow","title":"5. Verify Restore intern\u00ed workflow","text":"<p>Vybere dump, import, validace tabulek, log, cleanup, alert p\u0159i selh\u00e1n\u00ed.</p>"},{"location":"13-runbooks/ops-runbook/#6-migrace-legacy-zaloh","title":"6. Migrace legacy z\u00e1loh","text":"<p>Such\u00fd b\u011bh: <pre><code>php artisan ops:backups-migrate --dry-run\n</code></pre> Ostr\u00e1 migrace: <pre><code>php artisan ops:backups-migrate\n</code></pre></p>"},{"location":"13-runbooks/ops-runbook/#7-alerting-stavy","title":"7. Alerting stavy","text":"Alert Spou\u0161t\u011b\u010d Akce DB dump STALE/FAIL EvaluateBackupHealthJob Spustit dump / ov\u011b\u0159 cron Uploads snapshot STALE EvaluateBackupHealthJob Spustit snapshot job Verify restore overdue EvaluateBackupHealthJob Spustit verify Verify restore FAILED RunVerifyRestoreJob Analyzovat log"},{"location":"13-runbooks/ops-runbook/#8-slaba-mista-mesicni-checklist","title":"8. Slab\u00e1 m\u00edsta / m\u011bs\u00ed\u010dn\u00ed checklist","text":"<ul> <li>N\u00e1hodn\u00e1 validace dumpu.</li> <li>Trend velikosti dump\u016f.</li> <li>Restic <code>check</code>.</li> </ul>"},{"location":"13-runbooks/ops-runbook/#9-env-promenne-ops","title":"9. Env prom\u011bnn\u00e9 (ops)","text":"Var V\u00fdznam OPS_DB_DUMP_STALE_MIN Prah st\u00e1rnut\u00ed dumpu OPS_DB_DUMP_FAIL_MIN Prah FAIL OPS_SNAPSHOT_STALE_MIN Prah snapshotu OPS_VERIFY_OVERDUE_HOURS Prah verify (h) OPS_BACKUP_BASE Root adres\u00e1\u0159 OPS_VERIFY_AUTO Povolit weekly verify"},{"location":"13-runbooks/ops-runbook/#10-rychle-debug-prikazy","title":"10. Rychl\u00e9 debug p\u0159\u00edkazy","text":"<pre><code>ls -1t ${OPS_BACKUP_BASE:-/srv/backups/crm}/db/full-*.sql.gz 2&gt;/dev/null | head -1\nfind ${OPS_BACKUP_BASE:-/srv/backups/crm}/snapshots -type f -name 'snapshot-*.txt' -printf '%T@ %f\\n' 2&gt;/dev/null | sort -nr | head -1\nfind ${OPS_BACKUP_BASE:-/srv/backups/crm}/verify -type f -name 'verify-*.log' -printf '%T@ %f\\n' 2&gt;/dev/null | sort -nr | head -1 | cut -d' ' -f2-\n</code></pre>"},{"location":"13-runbooks/ops-runbook/#11-budouci-rozsireni","title":"11. Budouc\u00ed roz\u0161\u00ed\u0159en\u00ed","text":"<ul> <li>Sidecar git runner.</li> <li>Binlog shipping.</li> <li>Automatizovan\u00fd DR drill.</li> </ul> <p>Aktualizace p\u0159i ka\u017ed\u00e9 zm\u011bn\u011b workflow.</p>"},{"location":"14-checklists/pr-checklist/","title":"PR Checklist","text":"<ul> <li>[ ] Testy pro zm\u011bn\u011bn\u00e9 kritick\u00e9 \u010d\u00e1sti</li> <li>[ ] Aktualizovan\u00e9 modulov\u00e9 dokumenty</li> <li>[ ] \u00daprava .env.example (pokud nov\u00e1 prom\u011bnn\u00e1)</li> <li>[ ] Spu\u0161t\u011bno <code>php artisan docs:refresh</code> a commitnuty zm\u011bny <code>docs/16-generated</code></li> <li>[ ] Zv\u00e1\u017eeno / vytvo\u0159eno ADR</li> </ul>"},{"location":"15-templates/adr-template/","title":"ADR-YYYYMMDD:  <p>Status: Proposed</p>","text":""},{"location":"15-templates/adr-template/#kontext","title":"Kontext","text":""},{"location":"15-templates/adr-template/#rozhodnuti","title":"Rozhodnut\u00ed","text":""},{"location":"15-templates/adr-template/#alternativy","title":"Alternativy","text":""},{"location":"15-templates/adr-template/#dusledky","title":"D\u016fsledky","text":""},{"location":"15-templates/adr-template/#implementace","title":"Implementace","text":""},{"location":"15-templates/module/","title":"<p>Status: draft Odpov\u011bdnost:","text":""},{"location":"15-templates/module/#ucel","title":"\u00da\u010del","text":""},{"location":"15-templates/module/#komponenty","title":"Komponenty","text":""},{"location":"15-templates/module/#datove-entity","title":"Datov\u00e9 entity","text":""},{"location":"15-templates/module/#flow","title":"Flow","text":""},{"location":"15-templates/module/#konfigurace-env","title":"Konfigurace / ENV","text":""},{"location":"15-templates/module/#failure-modes","title":"Failure Modes","text":""},{"location":"15-templates/module/#alerting-monitoring","title":"Alerting / Monitoring","text":""},{"location":"15-templates/module/#zavislosti","title":"Z\u00e1vislosti","text":""},{"location":"15-templates/module/#rozsireni-backlog","title":"Roz\u0161\u00ed\u0159en\u00ed / Backlog","text":""},{"location":"16-generated/backup-report-latest/","title":"Backup Report (latest)","text":"<p>Adres\u00e1\u0159 report\u016f nenalezen. Spus\u0165 <code>GenerateBackupReportJob</code>.</p>"},{"location":"16-generated/db-schema/","title":"DB Schema (generov\u00e1no)","text":"<p>Nepoda\u0159ilo se p\u0159ipojit k DB: <code>SQLSTATE[HY000] [2002] php_network_getaddresses: getaddrinfo for crm_esl_mysql failed: Temporary failure in name resolution</code></p>"},{"location":"16-generated/env-matrix/","title":"ENV Matrix (generov\u00e1no)","text":"Var V .env.example Pou\u017eito v config AC_API_TOKEN Ano AC_BASE_URL Ano APP_DEBUG Ano Ano APP_ENV Ano Ano APP_FAKER_LOCALE Ano APP_FALLBACK_LOCALE Ano APP_KEY Ano Ano APP_LOCALE Ano APP_MAINTENANCE_DRIVER Ano APP_MAINTENANCE_STORE Ano APP_NAME Ano Ano APP_PREVIOUS_KEYS Ano APP_TIMEZONE Ano APP_URL Ano Ano AUTH_GUARD Ano AUTH_MODEL Ano AUTH_PASSWORD_BROKER Ano AUTH_PASSWORD_RESET_TOKEN_TABLE Ano AUTH_PASSWORD_TIMEOUT Ano AWS_ACCESS_KEY_ID Ano AWS_BUCKET Ano AWS_DEFAULT_REGION Ano AWS_ENDPOINT Ano AWS_SECRET_ACCESS_KEY Ano AWS_URL Ano AWS_USE_PATH_STYLE_ENDPOINT Ano BACKUP_ARCHIVE_PASSWORD Ano BACKUP_CLEANUP_ENABLED Ano BACKUP_DB_CONNECTION Ano BACKUP_DB_PASSWORD Ano BACKUP_DB_USERNAME Ano BACKUP_SCHEDULE_CRON Ano BACKUP_SCHEDULE_ENABLED Ano BEANSTALKD_QUEUE Ano BEANSTALKD_QUEUE_HOST Ano BEANSTALKD_QUEUE_RETRY_AFTER Ano CACHE_PREFIX Ano CACHE_STORE Ano DB_CACHE_CONNECTION Ano DB_CACHE_LOCK_CONNECTION Ano DB_CACHE_LOCK_TABLE Ano DB_CACHE_TABLE Ano DB_CHARSET Ano DB_COLLATION Ano DB_CONNECTION Ano Ano DB_DATABASE Ano Ano DB_ENCRYPT Ano DB_FOREIGN_KEYS Ano DB_HOST Ano Ano DB_PASSWORD Ano Ano DB_PORT Ano Ano DB_QUEUE Ano DB_QUEUE_CONNECTION Ano DB_QUEUE_RETRY_AFTER Ano DB_QUEUE_TABLE Ano DB_SOCKET Ano DB_TRUST_SERVER_CERTIFICATE Ano DB_URL Ano DB_USERNAME Ano Ano DYNAMODB_CACHE_TABLE Ano DYNAMODB_ENDPOINT Ano EMBEDDINGS_DIMENSION Ano EMBEDDINGS_LOCAL_URL Ano EMBEDDINGS_MODEL Ano EMBEDDINGS_PROVIDER Ano FILESYSTEM_DISK Ano GOOGLE_GEMINI_API_KEY Ano LOG_CHANNEL Ano LOG_DAILY_DAYS Ano LOG_DEPRECATIONS_CHANNEL Ano LOG_DEPRECATIONS_TRACE Ano LOG_LEVEL Ano LOG_PAPERTRAIL_HANDLER Ano LOG_SLACK_EMOJI Ano LOG_SLACK_USERNAME Ano LOG_SLACK_WEBHOOK_URL Ano LOG_STACK Ano LOG_STDERR_FORMATTER Ano LOG_SYSLOG_FACILITY Ano LOG_TOOLS_LEVEL Ano MAIL_EHLO_DOMAIN Ano MAIL_FROM_ADDRESS Ano MAIL_FROM_NAME Ano MAIL_HOST Ano MAIL_LOG_CHANNEL Ano MAIL_MAILER Ano MAIL_PASSWORD Ano MAIL_PORT Ano MAIL_SCHEME Ano MAIL_SENDMAIL_PATH Ano MAIL_URL Ano MAIL_USERNAME Ano MEMCACHED_HOST Ano MEMCACHED_PASSWORD Ano MEMCACHED_PERSISTENT_ID Ano MEMCACHED_PORT Ano MEMCACHED_USERNAME Ano MYSQL_ATTR_SSL_CA Ano OPENAI_API_KEY Ano OPENROUTER_API_KEY Ano OPENROUTER_APP_NAME Ano OPENROUTER_SITE_URL Ano OPS_ALERTS_ENABLED Ano OPS_DB_DUMP_FAIL_MIN Ano OPS_DB_DUMP_STALE_MIN Ano OPS_SNAPSHOT_STALE_MIN Ano OPS_VERIFY_OVERDUE_HOURS Ano PAPERTRAIL_PORT Ano PAPERTRAIL_URL Ano POSTMARK_MESSAGE_STREAM_ID Ano POSTMARK_TOKEN Ano QDRANT_API_KEY Ano QDRANT_COLLECTION Ano QDRANT_ENABLED Ano QDRANT_TIMEOUT Ano QDRANT_URL Ano QUEUE_CONNECTION Ano QUEUE_FAILED_DRIVER Ano REDIS_CACHE_CONNECTION Ano REDIS_CACHE_DB Ano REDIS_CACHE_LOCK_CONNECTION Ano REDIS_CLIENT Ano REDIS_CLUSTER Ano REDIS_DB Ano REDIS_HOST Ano REDIS_PASSWORD Ano REDIS_PORT Ano REDIS_PREFIX Ano REDIS_QUEUE Ano REDIS_QUEUE_CONNECTION Ano REDIS_QUEUE_RETRY_AFTER Ano REDIS_URL Ano REDIS_USERNAME Ano RESEND_KEY Ano SESSION_CONNECTION Ano SESSION_DOMAIN Ano SESSION_DRIVER Ano Ano SESSION_ENCRYPT Ano SESSION_EXPIRE_ON_CLOSE Ano SESSION_HTTP_ONLY Ano SESSION_LIFETIME Ano SESSION_PARTITIONED_COOKIE Ano SESSION_PATH Ano SESSION_SAME_SITE Ano SESSION_SECURE_COOKIE Ano SESSION_STORE Ano SESSION_TABLE Ano SLACK_BOT_USER_DEFAULT_CHANNEL Ano SLACK_BOT_USER_OAUTH_TOKEN Ano SQS_PREFIX Ano SQS_QUEUE Ano SQS_SUFFIX Ano"},{"location":"16-generated/erd/","title":"ERD (generov\u00e1no, heuristika ze source k\u00f3du)","text":"<pre><code>erDiagram\n  KNOWLEDGECHUNK }o--|| KNOWLEDGEDOCUMENT : belongs_to\n  LEAD }o--|| USER : belongs_to\n  LEAD }o--|| OPPORTUNITY : belongs_to\n  LEAD ||--o{ TASK : morph_many\n  TASK }o--|| USER : belongs_to\n  TASK }o--|| PROJECT : belongs_to\n  TASK }o..o{ POLYMORPHIC : morph_to\n  SALESORDER }o--|| COMPANY : belongs_to\n  SALESORDER }o--|| CONTACT : belongs_to\n  SALESORDER ||--o{ SALESORDERITEM : has_many\n  OPPORTUNITY }o--|| CONTACT : belongs_to\n  OPPORTUNITY }o--|| COMPANY : belongs_to\n  OPPORTUNITY }o--|| USER : belongs_to\n  COMPANY }o--|| USER : belongs_to\n  COMPANY ||--o{ CONTACT : has_many\n  COMPANY ||--o{ OPPORTUNITY : has_many\n  COMPANY ||--o{ PROJECT : has_many\n  COMPANY ||--o{ SALESORDER : has_many\n  COMPANY ||--o{ TASK : morph_many\n  CONTACT }o--|| COMPANY : belongs_to\n  CONTACT }o--|| USER : belongs_to\n  CONTACT ||--o{ OPPORTUNITY : has_many\n  CONTACT ||--o{ PROJECT : has_many\n  CONTACT ||--o{ SALESORDER : has_many\n  CONTACT ||--o{ CONTACTCUSTOMFIELD : has_many\n  CONTACT ||--o{ CONTACTIDENTITY : has_many\n  CONTACT ||--o{ TASK : morph_many\n  PRODUCTGROUP ||--o{ PRODUCTGROUP : has_many\n  CONTACTCUSTOMFIELD }o--|| CONTACT : belongs_to\n  PROJECT }o--|| COMPANY : belongs_to\n  PROJECT }o--|| CONTACT : belongs_to\n  PROJECT }o--|| USER : belongs_to\n  PROJECT ||--o{ TASK : has_many\n  DEAL }o--|| OPPORTUNITY : belongs_to\n  DEAL }o--|| CONTACT : belongs_to\n  DEAL }o--|| USER : belongs_to\n  CONTACTIDENTITY }o--|| CONTACT : belongs_to\n  KNOWLEDGENOTE }o--|| USER : belongs_to\n  KNOWLEDGEDOCUMENT }o--|| USER : belongs_to\n  KNOWLEDGEDOCUMENT ||--o{ KNOWLEDGECHUNK : has_many\n  SALESORDERITEM }o--|| SALESORDER : belongs_to\n  KNOWLEDGECHUNK {\n    string document_id\n    string chunk_index\n    string text\n    array meta\n    array embedding\n    string embedding_dim\n    datetime embedded_at\n    string qdrant_point_id\n    string chunk_hash\n  }\n  LEAD {\n    string company_name\n    string contact_name\n    string email\n    string phone\n    string source\n    string status\n    integer score\n    decimal:2 estimated_value\n    string notes\n    string assigned_to\n    string created_by\n    datetime last_activity_at\n    datetime converted_at\n    string converted_to_opportunity_id\n  }\n  TASK {\n    string title\n    string description\n    string type\n    string status\n    string priority\n    string project_id\n    datetime due_date\n    datetime completed_at\n    string assigned_to\n    string created_by\n    string taskable_type\n    string taskable_id\n    string notes\n  }\n  SALESORDER {\n    string external_order_no\n    string company_id\n    string contact_id\n    date order_date\n    string author\n    decimal:2 total_amount\n    string source\n    string notes\n  }\n  OPPORTUNITY {\n    string name\n    string description\n    decimal:2 value\n    integer probability\n    string stage\n    date expected_close_date\n    string contact_id\n    string company_id\n    string assigned_to\n    string created_by\n    datetime closed_at\n    string close_reason\n    string close_notes\n  }\n  COMPANY {\n    string name\n    string industry\n    string size\n    string status\n    string website\n    string phone\n    string email\n    string address\n    string city\n    string country\n    string notes\n    decimal:2 annual_revenue\n    string employee_count\n    string created_by\n  }\n  ACSYNCRUN {\n    datetime started_at\n    datetime finished_at\n    string limit\n    string offset\n    string created\n    string updated\n    string skipped\n    string skipped_unchanged\n    string errors\n    array sample_created_ids\n    array sample_updated_ids\n    string message\n  }\n  CONTACT {\n    string company_id\n    string first_name\n    string last_name\n    string email\n    string normalized_email\n    string phone\n    string normalized_phone\n    string mobile\n    string position\n    string department\n    string status\n    string marketing_status\n    date birthday\n    string address\n    string city\n    string country\n    string notes\n    array social_links\n    string preferred_contact\n    string created_by\n    datetime last_contacted_at\n    string ac_id\n    string ac_hash\n    datetime ac_updated_at\n    string legacy_external_id\n  }\n  SYSTEMSETTING {\n    string key\n    string value\n  }\n  PRODUCTGROUP {\n    string code\n    string name\n    string name_alt\n    string eshop_url\n    string parent_id\n  }\n  APPLINK {\n    string name\n    string url\n    string icon_url\n    integer position\n    boolean is_active\n  }\n  USER {\n    string name\n    string email\n    string password\n    string is_admin\n  }\n  CONTACTCUSTOMFIELD {\n    string contact_id\n    string key\n    string value\n    string type\n    string ac_field_id\n  }\n  OPSACTIVITY {\n    string type\n    string status\n    string user_id\n    datetime started_at\n    datetime finished_at\n    string duration_ms\n    array meta\n    string log_excerpt\n  }\n  CHATTOOLAUDIT {\n    string user_id\n    string conversation_id\n    string tool\n    string intent\n    array payload\n    array result_meta\n    string duration_ms\n  }\n  TAG {\n    string name\n    string source\n  }\n  PROJECT {\n    string name\n    string description\n    string status\n    date start_date\n    date due_date\n    string company_id\n    string contact_id\n    string assigned_to\n    string created_by\n  }\n  DEAL {\n    string opportunity_id\n    string name\n    decimal:2 amount\n    date close_date\n    string status\n    string terms\n    string notes\n    string signed_by_contact_id\n    datetime signed_at\n    string created_by\n  }\n  CONTACTIDENTITY {\n    string contact_id\n    string source\n    string external_id\n    string external_hash\n  }\n  KNOWLEDGENOTE {\n    string user_id\n    string title\n    string content\n    array tags\n    string visibility\n  }\n  KNOWLEDGEDOCUMENT {\n    string user_id\n    string title\n    string source_type\n    string mime\n    string size\n    string path\n    string status\n    string visibility\n    array tags\n    string error\n    datetime vectorized_at\n    string embedding_provider\n    string embedding_model\n    string embedding_dim\n    string vectors_count\n    string last_index_duration_ms\n  }\n  SALESORDERITEM {\n    string sales_order_id\n    string sku\n    string alt_code\n    string name\n    string name_alt\n    decimal:3 qty\n    decimal:4 unit_price\n    decimal:4 unit_price_disc\n    decimal:4 cost\n    decimal:4 cost_disc\n    decimal:2 discounts_card\n    decimal:2 discounts_group\n    string product_group\n    string eshop_category_url\n    string tax_code\n    string currency\n  }\n</code></pre>"},{"location":"16-generated/jobs/","title":"Queue Job Katalog (generov\u00e1no)","text":"T\u0159\u00edda Queue Popis Jobs\\AcEnrichContactJob imports Jobs\\ActiveCampaignSyncJob default * Periodick\u00e1 inkrement\u00e1ln\u00ed synchronizace kontakt\u016f z ActiveCampaign. Jobs\\ImportActiveCampaignAll default Jobs\\IndexKnowledgeDocumentJob default * Indexuje jeden KnowledgeDocument do Qdrant: Jobs\\Ops\\CreateGitTagJob ops Jobs\\Ops\\EvaluateBackupHealthJob default Jobs\\Ops\\GenerateBackupReportJob ops Jobs\\Ops\\RunDbBackupJob ops Jobs\\Ops\\RunStorageSnapshotJob ops Jobs\\Ops\\RunVerifyRestoreJob ops"},{"location":"16-generated/model-fields/","title":"Model Fields (generov\u00e1no)","text":"<p>Heuristick\u00fd v\u00fdpis na z\u00e1klad\u011b $fillable a $casts. Skute\u010dn\u00e9 DB typy ov\u011b\u0159te migracemi.</p>"},{"location":"16-generated/model-fields/#knowledgechunk","title":"KnowledgeChunk","text":"Pole Typ (cast) document_id chunk_index text meta array embedding array embedding_dim embedded_at datetime qdrant_point_id chunk_hash"},{"location":"16-generated/model-fields/#lead","title":"Lead","text":"Pole Typ (cast) company_name contact_name email phone source status score integer estimated_value decimal:2 notes assigned_to created_by last_activity_at datetime converted_at datetime converted_to_opportunity_id"},{"location":"16-generated/model-fields/#task","title":"Task","text":"Pole Typ (cast) title description type status priority project_id due_date datetime completed_at datetime assigned_to created_by taskable_type taskable_id notes"},{"location":"16-generated/model-fields/#salesorder","title":"SalesOrder","text":"Pole Typ (cast) external_order_no company_id contact_id order_date date author total_amount decimal:2 source notes"},{"location":"16-generated/model-fields/#opportunity","title":"Opportunity","text":"Pole Typ (cast) name description value decimal:2 probability integer stage expected_close_date date contact_id company_id assigned_to created_by closed_at datetime close_reason close_notes"},{"location":"16-generated/model-fields/#company","title":"Company","text":"Pole Typ (cast) name industry size status website phone email address city country notes annual_revenue decimal:2 employee_count created_by"},{"location":"16-generated/model-fields/#acsyncrun","title":"AcSyncRun","text":"Pole Typ (cast) started_at datetime finished_at datetime limit offset created updated skipped skipped_unchanged errors sample_created_ids array sample_updated_ids array message"},{"location":"16-generated/model-fields/#contact","title":"Contact","text":"Pole Typ (cast) company_id first_name last_name email normalized_email phone normalized_phone mobile position department status marketing_status birthday date address city country notes social_links array preferred_contact created_by last_contacted_at datetime ac_id ac_hash ac_updated_at datetime legacy_external_id"},{"location":"16-generated/model-fields/#systemsetting","title":"SystemSetting","text":"Pole Typ (cast) key value"},{"location":"16-generated/model-fields/#productgroup","title":"ProductGroup","text":"Pole Typ (cast) code name name_alt eshop_url parent_id"},{"location":"16-generated/model-fields/#applink","title":"AppLink","text":"Pole Typ (cast) name url icon_url position integer is_active boolean"},{"location":"16-generated/model-fields/#user","title":"User","text":"Pole Typ (cast) name email password is_admin"},{"location":"16-generated/model-fields/#contactcustomfield","title":"ContactCustomField","text":"Pole Typ (cast) contact_id key value type ac_field_id"},{"location":"16-generated/model-fields/#opsactivity","title":"OpsActivity","text":"Pole Typ (cast) type status user_id started_at datetime finished_at datetime duration_ms meta array log_excerpt"},{"location":"16-generated/model-fields/#chattoolaudit","title":"ChatToolAudit","text":"Pole Typ (cast) user_id conversation_id tool intent payload array result_meta array duration_ms"},{"location":"16-generated/model-fields/#tag","title":"Tag","text":"Pole Typ (cast) name source"},{"location":"16-generated/model-fields/#project","title":"Project","text":"Pole Typ (cast) name description status start_date date due_date date company_id contact_id assigned_to created_by"},{"location":"16-generated/model-fields/#deal","title":"Deal","text":"Pole Typ (cast) opportunity_id name amount decimal:2 close_date date status terms notes signed_by_contact_id signed_at datetime created_by"},{"location":"16-generated/model-fields/#contactidentity","title":"ContactIdentity","text":"Pole Typ (cast) contact_id source external_id external_hash"},{"location":"16-generated/model-fields/#knowledgenote","title":"KnowledgeNote","text":"Pole Typ (cast) user_id title content tags array visibility"},{"location":"16-generated/model-fields/#knowledgedocument","title":"KnowledgeDocument","text":"Pole Typ (cast) user_id title source_type mime size path status visibility tags array error vectorized_at datetime embedding_provider embedding_model embedding_dim vectors_count last_index_duration_ms"},{"location":"16-generated/model-fields/#salesorderitem","title":"SalesOrderItem","text":"Pole Typ (cast) sales_order_id sku alt_code name name_alt qty decimal:3 unit_price decimal:4 unit_price_disc decimal:4 cost decimal:4 cost_disc decimal:4 discounts_card decimal:2 discounts_group decimal:2 product_group eshop_category_url tax_code currency"},{"location":"16-generated/navigation/","title":"Navigace (generov\u00e1no)","text":"<p>Automatick\u00fd p\u0159ehled polo\u017eek CRM menu (GET routy s prefixem <code>/crm</code>). Popisy lze doplnit v <code>docs/_meta/menu.php</code>.</p>"},{"location":"16-generated/navigation/#dashboard","title":"Dashboard","text":"<p>V\u00fdchoz\u00ed p\u0159ehled (widgety, stav synchronizac\u00ed, kl\u00ed\u010dov\u00e9 KPI).</p> Cesta Route name Popis <code>/</code> crm.dashboard Hlavn\u00ed p\u0159ehled a rychl\u00e9 akce."},{"location":"16-generated/navigation/#firmy","title":"Firmy","text":"<p>Evidence firem (profil, revenue, pr\u016fmysl) \u2013 vstup do detailu vztah\u016f.</p> Cesta Route name Popis <code>/companies</code> companies.index (popis chyb\u00ed) <code>/companies/create</code> companies.create (popis chyb\u00ed) <code>/companies/{company}</code> companies.show (popis chyb\u00ed) <code>/companies/{company}/edit</code> companies.edit (popis chyb\u00ed)"},{"location":"16-generated/navigation/#kontakty","title":"Kontakty","text":"<p>Evidence osob nav\u00e1zan\u00fdch na firmy, segmentace a marketing status.</p> Cesta Route name Popis <code>/contacts</code> contacts.index (popis chyb\u00ed) <code>/contacts/create</code> contacts.create (popis chyb\u00ed) <code>/contacts/{contact}</code> contacts.show (popis chyb\u00ed) <code>/contacts/{contact}/edit</code> contacts.edit (popis chyb\u00ed)"},{"location":"16-generated/navigation/#leady","title":"Leady","text":"<p>Potenci\u00e1ln\u00ed p\u0159\u00edle\u017eitosti p\u0159ed kvalifikac\u00ed (kanban/pipeline varianty).</p> Cesta Route name Popis <code>/leads</code> leads.index (popis chyb\u00ed) <code>/leads/create</code> leads.create (popis chyb\u00ed) <code>/leads/{lead}</code> leads.show (popis chyb\u00ed) <code>/leads/{lead}/edit</code> leads.edit (popis chyb\u00ed)"},{"location":"16-generated/navigation/#prilezitosti","title":"P\u0159\u00edle\u017eitosti","text":"<p>Obchodn\u00ed p\u0159\u00edle\u017eitosti s f\u00e1zemi, pravd\u011bpodobnost\u00ed a predikc\u00ed closingu.</p> Cesta Route name Popis <code>/opportunities</code> opportunities.index (popis chyb\u00ed) <code>/opportunities/create</code> opportunities.create (popis chyb\u00ed) <code>/opportunities/{opportunity}</code> opportunities.show (popis chyb\u00ed) <code>/opportunities/{opportunity}/edit</code> opportunities.edit (popis chyb\u00ed)"},{"location":"16-generated/navigation/#ukoly","title":"\u00dakoly","text":"<p>Operativn\u00ed pr\u00e1ce nav\u00e1zan\u00e1 na entity (polymorfn\u00ed taskable).</p> Cesta Route name Popis <code>/tasks</code> tasks.index (popis chyb\u00ed) <code>/tasks/create</code> tasks.create (popis chyb\u00ed) <code>/tasks/{task}</code> tasks.show (popis chyb\u00ed) <code>/tasks/{task}/edit</code> tasks.edit (popis chyb\u00ed)"},{"location":"16-generated/navigation/#projekty","title":"Projekty","text":"<p>Dlouhodob\u011bj\u0161\u00ed iniciativy agreguj\u00edc\u00ed \u00fakoly a obchodn\u00ed kontext.</p> Cesta Route name Popis <code>/projects</code> projects.index (popis chyb\u00ed) <code>/projects/create</code> projects.create (popis chyb\u00ed) <code>/projects/{project}</code> projects.show (popis chyb\u00ed) <code>/projects/{project}/edit</code> projects.edit (popis chyb\u00ed)"},{"location":"16-generated/navigation/#knowledge-base","title":"Knowledge Base","text":"<p>Znalostn\u00ed b\u00e1ze (dokumenty, chunking, vektorov\u00e9 vyhled\u00e1v\u00e1n\u00ed).</p> Cesta Route name Popis <code>/knowledge</code> knowledge.index (popis chyb\u00ed) <code>/knowledge/create</code> knowledge.create (popis chyb\u00ed) <code>/knowledge/search/ajax</code> knowledge.search (popis chyb\u00ed) <code>/knowledge/{knowledge}/edit</code> knowledge.edit (popis chyb\u00ed)"},{"location":"16-generated/navigation/#marketing","title":"Marketing","text":"<p>Strategie, exekuce, analytika, nastaven\u00ed marketingu.</p> Cesta Route name Popis <code>/marketing</code> marketing.dashboard (popis chyb\u00ed) <code>/marketing/analytika/ab-testovani</code> marketing.analytics.ab (popis chyb\u00ed) <code>/marketing/analytika/ai-sentiment</code> marketing.analytics.sentiment (popis chyb\u00ed) <code>/marketing/analytika/atribuce</code> marketing.analytics.attribution (popis chyb\u00ed) <code>/marketing/analytika/cross-channel</code> marketing.analytics.cross (popis chyb\u00ed) <code>/marketing/analytika/seo</code> marketing.analytics.seo (popis chyb\u00ed) <code>/marketing/cileni/databaze-kontaktu</code> marketing.target.contacts (popis chyb\u00ed) <code>/marketing/cileni/lead-nurturing</code> marketing.target.nurturing (popis chyb\u00ed) <code>/marketing/cileni/segmentace</code> marketing.target.segments (popis chyb\u00ed) <code>/marketing/exekuce/automatizace</code> marketing.exec.automation (popis chyb\u00ed) <code>/marketing/exekuce/email-marketing</code> marketing.exec.email (popis chyb\u00ed) <code>/marketing/exekuce/influenceri-partneri</code> marketing.exec.influencers (popis chyb\u00ed) <code>/marketing/exekuce/kampane</code> marketing.exec.campaigns (popis chyb\u00ed) <code>/marketing/exekuce/knihovna-obsahu</code> marketing.exec.content (popis chyb\u00ed) <code>/marketing/exekuce/landing-pages</code> marketing.exec.landing (popis chyb\u00ed) <code>/marketing/exekuce/reklamy</code> marketing.exec.ads (popis chyb\u00ed) <code>/marketing/nastaveni/ai-sablony</code> marketing.settings.ai (popis chyb\u00ed) <code>/marketing/nastaveni/importy</code> settings.imports (popis chyb\u00ed) <code>/marketing/nastaveni/integrace-api</code> marketing.settings.integrations (popis chyb\u00ed) <code>/marketing/nastaveni/lead-scoring</code> marketing.settings.scoring (popis chyb\u00ed) <code>/marketing/nastaveni/role-prava</code> marketing.settings.roles (popis chyb\u00ed) <code>/marketing/strategie/budget</code> marketing.strategy.budget (popis chyb\u00ed) <code>/marketing/strategie/kalendar</code> marketing.strategy.calendar (popis chyb\u00ed) <code>/marketing/strategie/persony</code> marketing.strategy.personas (popis chyb\u00ed) <code>/marketing/strategie/swot</code> marketing.strategy.swot (popis chyb\u00ed) <code>/marketing/strategie/trendy-ai</code> marketing.strategy.trends (popis chyb\u00ed)"},{"location":"16-generated/navigation/#chat","title":"Chat","text":"<p>Konverza\u010dn\u00ed AI / u\u017eivatelsk\u00e9 relace.</p> Cesta Route name Popis <code>/chat</code> crm.chat (popis chyb\u00ed) <code>/chat/sessions</code> (popis chyb\u00ed) <code>/chat/sessions/{id}/messages</code> (popis chyb\u00ed) <code>/chat/stream</code> (popis chyb\u00ed)"},{"location":"16-generated/navigation/#system","title":"System","text":"<p>Admin konfigurace (ActiveCampaign, Backup, Qdrant, Tools, Chat, integrace).</p> Cesta Route name Popis <code>/system/activecampaign</code> system.ac.index (popis chyb\u00ed) <code>/system/activecampaign/runs</code> system.ac.runs (popis chyb\u00ed) <code>/system/apps</code> system.apps.index (popis chyb\u00ed) <code>/system/backup</code> system.backup.index (popis chyb\u00ed) <code>/system/backup/download/{path}</code> system.backup.download (popis chyb\u00ed) <code>/system/chat</code> system.chat.index (popis chyb\u00ed) <code>/system/chat/diagnostics</code> system.chat.diagnostics (popis chyb\u00ed) <code>/system/chat/lookup</code> system.chat.lookup (popis chyb\u00ed) <code>/system/qdrant</code> system.qdrant.index (popis chyb\u00ed) <code>/system/tools</code> system.tools.index (popis chyb\u00ed)"},{"location":"16-generated/navigation/#deals","title":"Deals","text":"Cesta Route name Popis <code>/deals</code> deals.index (popis chyb\u00ed) <code>/deals/create</code> deals.create (popis chyb\u00ed) <code>/deals/{deal}</code> deals.show (popis chyb\u00ed) <code>/deals/{deal}/edit</code> deals.edit (popis chyb\u00ed)"},{"location":"16-generated/navigation/#knowledge-docs","title":"Knowledge docs","text":"Cesta Route name Popis <code>/knowledge-docs</code> knowledge.docs.index (popis chyb\u00ed) <code>/knowledge-docs/create</code> knowledge.docs.create (popis chyb\u00ed)"},{"location":"16-generated/navigation/#leads-kanban","title":"Leads kanban","text":"Cesta Route name Popis <code>/leads-kanban</code> leads.kanban (popis chyb\u00ed)"},{"location":"16-generated/navigation/#opportunities-pipeline","title":"Opportunities pipeline","text":"Cesta Route name Popis <code>/opportunities-pipeline</code> opportunities.pipeline (popis chyb\u00ed)"},{"location":"16-generated/navigation/#ops","title":"Ops","text":"Cesta Route name Popis <code>/ops</code> ops.dashboard (popis chyb\u00ed) <code>/ops/history</code> ops.history.index (popis chyb\u00ed) <code>/ops/metrics</code> ops.metrics (popis chyb\u00ed)"},{"location":"16-generated/navigation/#orders","title":"Orders","text":"Cesta Route name Popis <code>/orders/{order}/items</code> (popis chyb\u00ed)"},{"location":"16-generated/navigation/#search","title":"Search","text":"Cesta Route name Popis <code>/search/customers</code> search.customers (popis chyb\u00ed) <code>/search/taskables</code> search.taskables (popis chyb\u00ed)"},{"location":"16-generated/permissions/","title":"Permissions (generov\u00e1no)","text":""},{"location":"16-generated/permissions/#seznam-opravneni","title":"Seznam opr\u00e1vn\u011bn\u00ed","text":"Permission Guard \u017e\u00e1dn\u00e1 data <p>Pozn\u00e1mka: Nepoda\u0159ilo se z\u00edskat runtime data (<code>SQLSTATE[HY000] [2002] php_network_getaddresses: getaddrinfo for crm_esl_mysql failed: Temporary failure in name resolution (Connection: mysql, SQL: select * from</code>permissions<code>order by</code>name<code>asc)</code>). Spus\u0165te v b\u011b\u017e\u00edc\u00edm aplika\u010dn\u00edm kontejneru.</p>"},{"location":"16-generated/routes/","title":"Routy (generov\u00e1no)","text":"Metoda URI N\u00e1zev Middleware Akce GET / root web RoutingController@index GET apps/user-contacts apps.users.index web,auth UserManagementController@index GET apps/user-profile apps.me.show web,auth ProfileController@show POST apps/user-profile apps.me.update web,auth ProfileController@update GET apps/user-profile/{user} apps.users.edit web,auth UserManagementController@edit POST apps/user-profile/{user} apps.users.update web,auth UserManagementController@update GET crm crm.dashboard web,auth Closure GET crm/chat crm.chat web,auth,throttle:30,1 ChatController@page POST crm/chat/messages web,auth,throttle:30,1 ChatController@postMessage GET crm/chat/sessions web,auth,throttle:30,1 ChatController@sessions POST crm/chat/sessions web,auth,throttle:30,1 ChatController@createSession GET crm/chat/sessions/{id}/messages web,auth,throttle:30,1 ChatController@history GET crm/chat/stream web,auth,throttle:30,1 ChatController@stream GET crm/companies companies.index web,auth CompanyController@index POST crm/companies companies.store web,auth CompanyController@store GET crm/companies/create companies.create web,auth CompanyController@create DELETE crm/companies/{company} companies.destroy web,auth CompanyController@destroy GET crm/companies/{company} companies.show web,auth CompanyController@show PUT,PATCH crm/companies/{company} companies.update web,auth CompanyController@update GET crm/companies/{company}/edit companies.edit web,auth CompanyController@edit GET crm/contacts contacts.index web,auth ContactController@index POST crm/contacts contacts.store web,auth ContactController@store GET crm/contacts/create contacts.create web,auth ContactController@create DELETE crm/contacts/{contact} contacts.destroy web,auth ContactController@destroy GET crm/contacts/{contact} contacts.show web,auth ContactController@show PUT,PATCH crm/contacts/{contact} contacts.update web,auth ContactController@update GET crm/contacts/{contact}/edit contacts.edit web,auth ContactController@edit GET crm/deals deals.index web,auth DealController@index POST crm/deals deals.store web,auth DealController@store GET crm/deals/create deals.create web,auth DealController@create DELETE crm/deals/{deal} deals.destroy web,auth DealController@destroy GET crm/deals/{deal} deals.show web,auth DealController@show PUT,PATCH crm/deals/{deal} deals.update web,auth DealController@update GET crm/deals/{deal}/edit deals.edit web,auth DealController@edit GET crm/knowledge knowledge.index web,auth KnowledgeController@index POST crm/knowledge knowledge.store web,auth KnowledgeController@store GET crm/knowledge-docs knowledge.docs.index web,auth KnowledgeDocumentsController@index POST crm/knowledge-docs knowledge.docs.store web,auth KnowledgeDocumentsController@store GET crm/knowledge-docs/create knowledge.docs.create web,auth KnowledgeDocumentsController@create POST crm/knowledge-docs/{id}/purge knowledge.docs.purge web,auth KnowledgeDocumentsController@purge POST crm/knowledge-docs/{id}/reindex knowledge.docs.reindex web,auth KnowledgeDocumentsController@reindex GET crm/knowledge/create knowledge.create web,auth KnowledgeController@create GET crm/knowledge/search/ajax knowledge.search web,auth KnowledgeController@search DELETE crm/knowledge/{knowledge} knowledge.destroy web,auth KnowledgeController@destroy PUT crm/knowledge/{knowledge} knowledge.update web,auth KnowledgeController@update GET crm/knowledge/{knowledge}/edit knowledge.edit web,auth KnowledgeController@edit GET crm/leads leads.index web,auth LeadController@index POST crm/leads leads.store web,auth LeadController@store GET crm/leads-kanban leads.kanban web,auth LeadController@kanban GET crm/leads/create leads.create web,auth LeadController@create DELETE crm/leads/{lead} leads.destroy web,auth LeadController@destroy GET crm/leads/{lead} leads.show web,auth LeadController@show PUT,PATCH crm/leads/{lead} leads.update web,auth LeadController@update GET crm/leads/{lead}/edit leads.edit web,auth LeadController@edit PATCH crm/leads/{lead}/status leads.update-status web,auth LeadController@updateStatus POST crm/leads/{lead}/status web,auth LeadController@updateStatus GET crm/marketing marketing.dashboard web,auth Closure GET crm/marketing/analytika/ab-testovani marketing.analytics.ab web,auth Closure GET crm/marketing/analytika/ai-sentiment marketing.analytics.sentiment web,auth Closure GET crm/marketing/analytika/atribuce marketing.analytics.attribution web,auth Closure GET crm/marketing/analytika/cross-channel marketing.analytics.cross web,auth Closure GET crm/marketing/analytika/seo marketing.analytics.seo web,auth Closure GET crm/marketing/cileni/databaze-kontaktu marketing.target.contacts web,auth Closure GET crm/marketing/cileni/lead-nurturing marketing.target.nurturing web,auth Closure GET crm/marketing/cileni/segmentace marketing.target.segments web,auth Closure GET crm/marketing/exekuce/automatizace marketing.exec.automation web,auth Closure GET crm/marketing/exekuce/email-marketing marketing.exec.email web,auth Closure GET crm/marketing/exekuce/influenceri-partneri marketing.exec.influencers web,auth Closure GET crm/marketing/exekuce/kampane marketing.exec.campaigns web,auth Closure GET crm/marketing/exekuce/knihovna-obsahu marketing.exec.content web,auth Closure GET crm/marketing/exekuce/landing-pages marketing.exec.landing web,auth Closure GET crm/marketing/exekuce/reklamy marketing.exec.ads web,auth Closure GET crm/marketing/nastaveni/ai-sablony marketing.settings.ai web,auth Closure GET crm/marketing/nastaveni/importy settings.imports web,auth ImportsController@index GET crm/marketing/nastaveni/integrace-api marketing.settings.integrations web,auth Closure GET crm/marketing/nastaveni/lead-scoring marketing.settings.scoring web,auth Closure GET crm/marketing/nastaveni/role-prava marketing.settings.roles web,auth Closure GET crm/marketing/strategie/budget marketing.strategy.budget web,auth Closure GET crm/marketing/strategie/kalendar marketing.strategy.calendar web,auth Closure GET crm/marketing/strategie/persony marketing.strategy.personas web,auth Closure GET crm/marketing/strategie/swot marketing.strategy.swot web,auth Closure GET crm/marketing/strategie/trendy-ai marketing.strategy.trends web,auth Closure GET crm/opportunities opportunities.index web,auth OpportunityController@index POST crm/opportunities opportunities.store web,auth OpportunityController@store GET crm/opportunities-pipeline opportunities.pipeline web,auth OpportunityController@pipeline GET crm/opportunities/create opportunities.create web,auth OpportunityController@create DELETE crm/opportunities/{opportunity} opportunities.destroy web,auth OpportunityController@destroy GET crm/opportunities/{opportunity} opportunities.show web,auth OpportunityController@show PUT,PATCH crm/opportunities/{opportunity} opportunities.update web,auth OpportunityController@update GET crm/opportunities/{opportunity}/edit opportunities.edit web,auth OpportunityController@edit GET crm/ops ops.dashboard web,auth,can:ops.view DashboardController@index POST crm/ops/actions/{action} ops.action web,auth,can:ops.execute,throttle:ops-actions ActionController@run GET crm/ops/history ops.history.index web,auth,can:ops.view HistoryController@index GET crm/ops/metrics ops.metrics web,auth,can:ops.view MetricsController GET crm/orders/{order}/items web,auth OrderItemsController@show GET crm/projects projects.index web,auth ProjectController@index POST crm/projects projects.store web,auth ProjectController@store GET crm/projects/create projects.create web,auth ProjectController@create DELETE crm/projects/{project} projects.destroy web,auth ProjectController@destroy GET crm/projects/{project} projects.show web,auth ProjectController@show PUT,PATCH crm/projects/{project} projects.update web,auth ProjectController@update GET crm/projects/{project}/edit projects.edit web,auth ProjectController@edit GET crm/search/customers search.customers web,auth SearchController@customers GET crm/search/taskables search.taskables web,auth SearchController@taskables GET crm/system/activecampaign system.ac.index web,auth ActiveCampaignController@index POST crm/system/activecampaign/import system.ac.import web,auth ActiveCampaignController@importBatch POST crm/system/activecampaign/import-10 system.ac.import10 web,auth ActiveCampaignController@importTen POST crm/system/activecampaign/import-all system.ac.importAll web,auth ActiveCampaignController@importAll POST crm/system/activecampaign/reset-offset system.ac.resetOffset web,auth ActiveCampaignController@resetOffset POST crm/system/activecampaign/run-batch system.ac.runBatch web,auth ActiveCampaignController@runBatch GET crm/system/activecampaign/runs system.ac.runs web,auth ActiveCampaignController@runs POST crm/system/activecampaign/test system.ac.test web,auth ActiveCampaignController@test POST crm/system/activecampaign/toggle system.ac.toggle web,auth ActiveCampaignController@toggleAuto POST crm/system/agentv2/enable system.agentv2.enable web,auth AgentV2SetupController@enable GET crm/system/apps system.apps.index web,auth AppsController@index POST crm/system/apps system.apps.store web,auth AppsController@store POST crm/system/apps/{appLink} system.apps.update web,auth AppsController@update POST crm/system/apps/{appLink}/delete system.apps.destroy web,auth AppsController@destroy GET crm/system/backup system.backup.index web,auth BackupController@index POST crm/system/backup/clean system.backup.clean web,auth BackupController@clean GET crm/system/backup/download/{path} system.backup.download web,auth BackupController@download POST crm/system/backup/run system.backup.run web,auth BackupController@run GET crm/system/chat system.chat.index web,auth ChatSettingsController@index POST crm/system/chat system.chat.save web,auth ChatSettingsController@save POST crm/system/chat/backfill system.chat.backfill web,auth ChatSettingsController@backfillNormalized GET crm/system/chat/diagnostics system.chat.diagnostics web,auth ChatSettingsController@diagnostics GET crm/system/chat/lookup system.chat.lookup web,auth ChatSettingsController@lookup POST crm/system/chat/test system.chat.test web,auth ChatSettingsController@test POST crm/system/migrate system.migrate web,auth MaintenanceController@migrate GET crm/system/qdrant system.qdrant.index web,auth QdrantController@index POST crm/system/qdrant/purge-reindex system.qdrant.purgeReindex web,auth QdrantMaintenanceController@purgeReindex POST crm/system/qdrant/recreate system.qdrant.recreate web,auth QdrantMaintenanceController@recreate POST crm/system/qdrant/save system.qdrant.save web,auth QdrantController@save POST crm/system/qdrant/test system.qdrant.test web,auth QdrantController@test POST crm/system/qdrant/verify system.qdrant.verify web,auth QdrantController@verify GET crm/system/tools system.tools.index web,auth ToolsController@index POST crm/system/tools/playwright/save system.tools.playwright.save web,auth ToolsController@savePlaywright POST crm/system/tools/playwright/test system.tools.playwright.test web,auth ToolsController@testPlaywright POST crm/system/tools/playwright/toggle system.tools.playwright.toggle web,auth ToolsController@togglePlaywright GET crm/tasks tasks.index web,auth TaskController@index POST crm/tasks tasks.store web,auth TaskController@store GET crm/tasks/create tasks.create web,auth TaskController@create DELETE crm/tasks/{task} tasks.destroy web,auth TaskController@destroy GET crm/tasks/{task} tasks.show web,auth TaskController@show PUT,PATCH crm/tasks/{task} tasks.update web,auth TaskController@update GET crm/tasks/{task}/edit tasks.edit web,auth TaskController@edit GET index index web,auth Closure GET login login web AuthController@showLogin POST login login.attempt web AuthController@login POST logout logout web AuthController@logout GET storage/{path} storage.local Closure GET up Closure GET {any} any web RoutingController@root GET {first}/{second} second web RoutingController@secondLevel GET {first}/{second}/{third} third web RoutingController@thirdLevel"},{"location":"16-generated/schedule/","title":"Schedule (generov\u00e1no)","text":"Typ C\u00edl Frekvence Queue Pozn\u00e1mka command backup:run command backup:clean weeklyOn(1, '4:00') job \\App\\Jobs\\ActiveCampaignSyncJob everyMinute job \\App\\Jobs\\Ops\\EvaluateBackupHealthJob everyTenMinutes ops call closure"}]}